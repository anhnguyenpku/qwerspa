{"metadata":{},"options":{"plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"base$0$2","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{}},{"key":"base$0$3","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"base$0$0$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$2","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$3","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$4","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$5","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$6","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$7","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$8","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$9","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$10","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$11","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$12","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$13","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$14","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$15","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$16","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$17","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$18","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$19","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$20","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$21","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"ClassPrivateProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$0$22","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$23","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]}},"options":{}}],"presets":[],"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/home/snr/Desktop/Project/spa/imports/vue/ui/accJournal.vue","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","dynamicImport",["flow",{}],"asyncGenerators","objectRestSpread","objectRestSpread",["flow",{}],"asyncGenerators"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"strictMode":false},"sourceFileName":"/home/snr/Desktop/Project/spa/imports/vue/ui/accJournal.vue","filename":"/home/snr/Desktop/Project/spa/imports/vue/ui/accJournal.vue","passPerPreset":false,"envName":"development","cwd":"/home/snr/Desktop/Project/spa","root":"/home/snr/Desktop/Project/spa","generatorOpts":{"filename":"/home/snr/Desktop/Project/spa/imports/vue/ui/accJournal.vue","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"/home/snr/Desktop/Project/spa/imports/vue/ui/accJournal.vue"}},"code":"var draggable;\nmodule.link(\"vuedraggable\", {\n  \"default\": function (v) {\n    draggable = v;\n  }\n}, 0);\nvar compoLang;\nmodule.link(\"../../../both/i18n/lang/elem-label-acc\", {\n  \"default\": function (v) {\n    compoLang = v;\n  }\n}, 1);\nvar Acc_JournalReact;\nmodule.link(\"../../collection/accJournal\", {\n  Acc_JournalReact: function (v) {\n    Acc_JournalReact = v;\n  }\n}, 2);\nmodule.exportDefault({\n  meteor: {\n    langSession: function () {\n      return Session.get('lang') || \"en\";\n    },\n    disabledRemove: function () {\n      return Session.get(\"canRemove\");\n    },\n    disabledUpdate: function () {\n      return Session.get(\"canUpdate\");\n    },\n    newRe: function () {\n      var vm = this;\n      Acc_JournalReact.find({}).fetch();\n      vm.queryData(vm.searchData, vm.skip, vm.currentSize + vm.skip);\n    }\n  },\n  components: {\n    draggable: draggable\n  },\n  data: function () {\n    return {\n      fullscreen: true,\n      journalData: [],\n      journalDataDisplay: [],\n      multipleSelection: [],\n      journalId: \"\",\n      loading: false,\n      searchData: '',\n      isSearching: false,\n      currentPage: 1,\n      currentSize: 10,\n      count: 0,\n      dialogAddJournal: false,\n      dialogUpdateJournal: false,\n      dialogShowJournal: false,\n      dialogPaid: false,\n      journalForm: {\n        account: \"\",\n        dr: 0,\n        cr: 0,\n        journalDate: moment().toDate(),\n        currencyId: \"KHR\",\n        voucherId: \"\",\n        name: \"\",\n        memo: \"\",\n        totalDr: 0,\n        totalCr: 0,\n        totalAmount: 0,\n        amount: 0,\n        method: \"\"\n      },\n      rules: {\n        journalDate: [{\n          type: 'date',\n          required: true,\n          message: 'Please input Journal Date',\n          trigger: 'blur'\n        }],\n        currencyId: [{\n          required: true,\n          type: 'string',\n          message: 'Please input Currency',\n          trigger: 'blur'\n        }],\n        voucherId: [{\n          required: true,\n          type: 'string',\n          message: 'Please input Journal No',\n          trigger: 'blur'\n        }],\n        memo: [{\n          required: true,\n          type: 'string',\n          message: 'Please input Memo',\n          trigger: 'blur'\n        }]\n      },\n      rulesPayment: {\n        journalDate: [{\n          type: 'date',\n          required: true,\n          message: 'Please input Journal Date',\n          trigger: 'blur'\n        }],\n        currencyId: [{\n          required: true,\n          type: 'string',\n          message: 'Please input Currency',\n          trigger: 'blur'\n        }],\n        method: [{\n          required: true,\n          type: 'string',\n          message: 'Please input Cash Method',\n          trigger: 'blur'\n        }],\n        voucherId: [{\n          required: true,\n          type: 'string',\n          message: 'Please input Journal No',\n          trigger: 'blur'\n        }],\n        memo: [{\n          required: true,\n          type: 'string',\n          message: 'Please input Memo',\n          trigger: 'blur'\n        }]\n      },\n      // Options\n      chartAccountDataOption: [],\n      dialog: true,\n      notifications: false,\n      sound: true,\n      widgets: false,\n      labelPosition: \"top\",\n      options: {\n        disabledDate: function (time) {\n          return false;\n        }\n      },\n      disabledDate: false,\n      closeDate: \"\",\n      methodOption: [],\n      type: \"\",\n      journalDetail: {},\n      skip: 0\n    };\n  },\n  mounted: function () {\n    var _this = this;\n\n    this.$jQuery('body').off();\n    var vm = this;\n    vm.options = {\n      disabledDate: function (time) {\n        var min = moment(vm.closeDate).add(1, \"days\").toDate().getTime();\n        return time.getTime() < min;\n      }\n    };\n    var elem = this.$jQuery('el-dialog.dialogJournal');\n\n    var checkEvent = $._data($('body').get(0), 'events');\n\n    if (checkEvent.keyup.length <= 1) {\n      this.$nextTick(function () {\n        _this.$jQuery('body').on('keydown', elem, _this.inputHandler);\n      });\n    }\n  },\n  watch: {\n    currentSize: function (val) {\n      this.isSearching = true;\n      this.skip = (this.currentPage - 1) * val;\n      this.queryData(this.searchData, this.skip, val + this.skip);\n    },\n    currentPage: function (val) {\n      this.isSearching = true;\n      this.skip = (val - 1) * this.currentSize;\n      this.queryData(this.searchData, this.skip, this.currentSize + this.skip);\n    },\n    searchData: function (val) {\n      this.isSearching = true;\n      this.skip = (this.currentPage - 1) * this.currentSize;\n      this.queryData(val, this.skip, this.currentSize + this.skip);\n    },\n    \"journalForm.journalDate\": function (val) {\n      var vm = this;\n\n      if (vm.dialogUpdateJournal == false) {\n        vm.journalForm.journalDate = val;\n        vm.autoIncreseVouchers(val);\n      }\n\n      if (vm.closeDate && vm.closeDate != \"\" && vm.closeDate != undefined) {\n        vm.options = {\n          disabledDate: function (time) {\n            var min = moment(vm.closeDate).add(1, \"days\").toDate().getTime();\n            return time.getTime() < min;\n          }\n        };\n      } else {\n        vm.options = {\n          disabledDate: function (time) {\n            return false;\n          }\n        };\n      }\n    },\n    \"journalForm.currencyId\": function (val) {\n      if (this.dialogUpdateJournal == false) {\n        this.journalForm.currencyId = val;\n        this.autoIncreseVouchers();\n      }\n    },\n    dialogAddJournal: function (val) {\n      if (val) {\n        this._inputMaskJournal();\n      }\n    },\n    dialogUpdateJournal: function (val) {\n      if (val) {\n        this._inputMaskJournal();\n      }\n    },\n    \"journalForm.account\": function (val) {\n      if (val) {\n        this._inputMaskJournal();\n      }\n    },\n    \"journalForm.dr\": function (val) {\n      if (val) {\n        this.journalForm.cr = 0;\n      }\n    },\n    \"journalForm.cr\": function (val) {\n      if (val) {\n        this.journalForm.dr = 0;\n      }\n    },\n    \"journalForm.method\": function (val) {\n      debugger;\n\n      if (val) {}\n    }\n  },\n  methods: {\n    handleSizeChange: function (val) {\n      this.currentSize = val;\n    },\n    handleCurrentChange: function (val) {\n      this.currentPage = val;\n    },\n    _inputMaskJournal: function () {\n      var _this2 = this;\n\n      setTimeout(function () {\n        if ($(\".el-inputAmount\").length) {\n          new _this2.$_Cleave('.el-inputAmount', {\n            numeral: true,\n            numeralThousandsGroupStyle: 'thousand'\n          });\n        }\n\n        if ($(\".el-inputDR\").length) {\n          new _this2.$_Cleave('.el-inputDR', {\n            numeral: true,\n            numeralThousandsGroupStyle: 'thousand'\n          });\n        }\n\n        if ($(\".el-inputCR\").length) {\n          new _this2.$_Cleave('.el-inputCR', {\n            numeral: true,\n            numeralThousandsGroupStyle: 'thousand'\n          });\n        }\n      }, 200);\n    },\n    queryData: _.debounce(function (val, skip, limit) {\n      var _this3 = this;\n\n      Meteor.call('queryJournal', {\n        q: val,\n        filter: this.filter,\n        options: {\n          skip: skip || 0,\n          limit: limit || 10\n        }\n      }, function (err, result) {\n        if (!err) {\n          _this3.journalDataDisplay = result.content;\n          _this3.count = result.countJournal;\n        }\n\n        _this3.isSearching = false;\n      });\n    }, 300),\n    inputHandler: function (e) {\n      if (e.data.init(0).selector === \"el-dialog.dialogJournal\") {\n        var vm = this;\n\n        if (vm.dialogAddJournal === true) {\n          if (e.keyCode === 13 && e.ctrlKey && !e.altKey) {\n            e.preventDefault();\n            vm.saveJournal(true, e);\n          } else if (e.keyCode === 13 && e.ctrlKey && e.altKey) {\n            e.preventDefault();\n            vm.saveJournal(false, e);\n          }\n        } else if (vm.dialogPaid === true) {\n          if (e.keyCode === 13 && e.ctrlKey && !e.altKey) {\n            e.preventDefault();\n            vm.saveJournalPaid(true, e, vm.type);\n          } else if (e.keyCode === 13 && e.ctrlKey && e.altKey) {\n            e.preventDefault();\n            vm.saveJournalPaid(false, e, vm.type);\n          }\n        }\n\n        if (vm.dialogAddJournal === false && vm.dialogUpdateJournal === false && vm.dialogPaid === false) {\n          if (e.keyCode === 107 && !e.ctrlKey && !e.altKey) {\n            e.preventDefault();\n            vm.popupJournalAdd();\n            vm.dialogAddJournal = true;\n            vm.autoIncreseVouchers();\n            vm.resetForm();\n          }\n        }\n\n        if (e.keyCode === 27 && !e.ctrlKey && !e.altKey) {\n          e.preventDefault();\n          vm.dialogAddJournal = false;\n        }\n      }\n    },\n    chartAccountOption: function () {\n      var _this4 = this;\n\n      var selector = {};\n\n      if (this.accountTypeId !== \"\" && this.accountTypeId !== undefined) {\n        selector.accountTypeId = this.accountTypeId;\n      }\n\n      Meteor.call('queryChartAccountOption', selector, function (err, result) {\n        _this4.chartAccountDataOption = result;\n      });\n    },\n    chartAccountMethodOption: function () {\n      var _this5 = this;\n\n      var selector = {};\n\n      if (this.accountTypeId !== \"\" && this.accountTypeId !== undefined) {\n        selector.accountTypeId = this.accountTypeId;\n      }\n\n      Meteor.call('queryChartAccountMethodOption', selector, function (err, result) {\n        _this5.methodOption = result;\n      });\n    },\n    saveJournal: function (isCloseDialog, event) {\n      var _this6 = this;\n\n      event.preventDefault();\n      var vm = this;\n      var checkSubmit = this.checkDrCr();\n\n      if (checkSubmit === false || vm.journalData.length === 0) {\n        vm.$notify.error({\n          title: 'Error',\n          message: 'Dr and Cr is not balance!'\n        });\n        return false;\n      } else {\n        this.$refs[\"journalFormAdd\"].validate(function (valid) {\n          if (valid) {\n            var journalDoc = {\n              journalDate: vm.journalForm.journalDate,\n              journalDateName: moment(vm.journalForm.journalDate).format(\"DD/MM/YYYY\"),\n              voucherId: vm.journalForm.voucherId,\n              currencyId: vm.journalForm.currencyId,\n              name: vm.journalForm.name,\n              memo: vm.journalForm.memo,\n              total: vm.$_numeral(vm.journalForm.totalDr).value(),\n              rolesArea: Session.get('area')\n            };\n            journalDoc.transaction = vm.journalData;\n            Meteor.call(\"insertJournal\", journalDoc, function (err, result) {\n              if (!err) {\n                vm.$message({\n                  duration: 1000,\n                  message: \"Save Successfully!\",\n                  type: 'success'\n                });\n\n                if (isCloseDialog) {\n                  _this6.dialogAddJournal = false;\n                }\n\n                vm.resetForm();\n              }\n            });\n          }\n        });\n      }\n    },\n    saveJournalPaid: function (isCloseDialog, event, type, isPrint) {\n      var _this7 = this;\n\n      event.preventDefault();\n      var vm = this;\n      this.$refs[\"journalFormPayment\"].validate(function (valid) {\n        if (valid) {\n          var journalDoc = {\n            journalDate: vm.journalForm.journalDate,\n            journalDateName: moment(vm.journalForm.journalDate).format(\"DD/MM/YYYY\"),\n            voucherId: vm.journalForm.voucherId,\n            currencyId: vm.journalForm.currencyId,\n            name: vm.journalForm.name,\n            memo: vm.journalForm.memo,\n            total: vm.$_numeral(vm.journalForm.totalAmount).value(),\n            rolesArea: Session.get('area'),\n            method: vm.journalForm.method\n          };\n          journalDoc.transaction = vm.journalData;\n\n          if (journalDoc.transaction.length <= 0) {\n            vm.$message({\n              duration: 1000,\n              message: \"Add Payment Account!\",\n              type: 'error'\n            });\n            return false;\n          }\n\n          Meteor.call(\"insertJournalPaid\", journalDoc, type, function (err, result) {\n            if (!err) {\n              if (isPrint === true) {\n                FlowRouter.go('/acc-data/accPayment/print?inv=' + result);\n              } else {\n                vm.$message({\n                  duration: 1000,\n                  message: \"Save Successfully!\",\n                  type: 'success'\n                });\n              }\n\n              if (isCloseDialog) {\n                _this7.dialogPaid = false;\n              }\n\n              vm.resetForm();\n            }\n          });\n        }\n      });\n    },\n    printPaymentInvoice: function (journalId) {\n      FlowRouter.go('/acc-data/accPayment/print?inv=' + journalId);\n    },\n    updateJournal: function (id) {\n      event.preventDefault();\n      var vm = this;\n      var checkSubmit = vm.checkDrCr();\n\n      if (checkSubmit === false || vm.journalData.length === 0) {\n        vm.$notify.error({\n          title: 'Error',\n          message: 'Dr and Cr is not balance!'\n        });\n        return false;\n      } else {\n        vm.$refs[\"journalFormUpdate\"].validate(function (valid) {\n          if (valid) {\n            var journalDoc = {\n              journalDate: vm.journalForm.journalDate,\n              journalDateName: moment(vm.journalForm.journalDate).format(\"DD/MM/YYYY\"),\n              voucherId: vm.journalForm.voucherId,\n              currencyId: vm.journalForm.currencyId,\n              name: vm.journalForm.name,\n              memo: vm.journalForm.memo,\n              total: vm.$_numeral(vm.journalForm.totalDr).value(),\n              rolesArea: Session.get('area')\n            };\n            journalDoc.transaction = vm.journalData;\n            Meteor.call(\"updateJournal\", journalDoc, id, function (err, result) {\n              if (!err) {\n                vm.$message({\n                  duration: 1000,\n                  message: \"Save Successfully!\",\n                  type: 'success'\n                });\n                vm.dialogUpdateJournal = false;\n                vm.resetForm();\n              }\n            });\n          }\n        });\n      }\n    },\n    removeJournal: function (index, row, rows) {\n      var vm = this;\n\n      if (row.status == \"Normal\") {\n        Meteor.call(\"queryLastClosingEntry\", Session.get(\"area\"), function (err, re) {\n          if (re == undefined || re.closeDate.getTime() < row.journalDate.getTime()) {\n            vm.$confirm('This will permanently delete the file. Continue?', 'Warning', {\n              confirmButtonText: 'OK',\n              cancelButtonText: 'Cancel',\n              type: 'warning'\n            }).then(function () {\n              Meteor.call(\"removeJournal\", row._id, function (err, result) {\n                if (!err) {\n                  rows.splice(index, 1);\n                  vm.$message({\n                    message: \"\\u179B\\u17BB\\u1794 \" + row.journalDateName + \"\\u200B : \" + row.voucherId + \" \\u1794\\u17B6\\u1793\\u1787\\u17C4\\u1782\\u1787\\u17D0\\u1799\",\n                    type: 'success'\n                  });\n                } else {\n                  vm.$message({\n                    type: 'error',\n                    message: 'Delete Fialed'\n                  });\n                }\n              });\n            }).catch(function () {\n              vm.$message({\n                type: 'info',\n                message: 'Delete canceled'\n              });\n            });\n          } else {\n            vm.$message({\n              duration: 1000,\n              message: \"You already Closing Entry!!\",\n              type: 'error'\n            });\n          }\n        });\n      } else {\n        vm.$message({\n          duration: 1000,\n          message: \"Not Normal State!!\",\n          type: 'error'\n        });\n      }\n    },\n    popupJournalAdd: function () {\n      var vm = this;\n      $(\".el-dialog__title\").text(\"Add Journal Entry\");\n      Meteor.call(\"queryLastClosingEntry\", Session.get(\"area\"), function (err, re) {\n        if (re != undefined) {\n          vm.closeDate = re.closeDate;\n        } else {\n          vm.closeDate = \"\";\n        }\n      });\n    },\n    popupJournalPayment: function () {\n      var vm = this;\n      vm.type = \"Payment\"; // $('#dialog').attr('title', 'New Title').dialog();\n\n      $(\".el-dialog__title\").text(\"Payment (Account)\");\n      vm.journalForm.method = \"\";\n      Meteor.call(\"queryLastClosingEntry\", Session.get(\"area\"), function (err, re) {\n        if (re != undefined) {\n          vm.closeDate = re.closeDate;\n        } else {\n          vm.closeDate = \"\";\n        }\n      });\n    },\n    popupJournalReceive: function () {\n      var vm = this;\n      vm.type = \"Receive\";\n      vm.journalForm.method = \"\"; // $('#dialog').attr('title', 'New Title').dialog();\n\n      $(\".el-dialog__title\").text(\"Receive (Account)\");\n      Meteor.call(\"queryLastClosingEntry\", Session.get(\"area\"), function (err, re) {\n        if (re !== undefined) {\n          vm.closeDate = re.closeDate;\n        } else {\n          vm.closeDate = \"\";\n        }\n      });\n    },\n    popupJournalUpdate: function (index, row, scope) {\n      var vm = this;\n      $(\".el-dialog__title\").text(\"Update Journal Entry\");\n\n      if (row.status === \"Normal\") {\n        Meteor.call(\"queryLastClosingEntry\", Session.get(\"area\"), function (err, re) {\n          if (re === undefined || re.closeDate.getTime() < row.journalDate.getTime()) {\n            vm.dialogUpdateJournal = true;\n            vm.findJournalById(scope);\n\n            if (re !== undefined) {\n              vm.closeDate = re.closeDate;\n            } else {\n              vm.closeDate = \"\";\n            }\n          } else {\n            vm.$message({\n              duration: 1000,\n              message: \"You already Closing Entry!!\",\n              type: 'error'\n            });\n            vm.dialogUpdateJournal = false;\n            vm.closeDate = \"\";\n          }\n        });\n      } else {\n        vm.closeDate = \"\";\n        this.$message({\n          duration: 1000,\n          message: \"Not Normal State!!\",\n          type: 'error'\n        });\n      }\n    },\n    popupJournalShow: function (row) {\n      var vm = this;\n      this.dialogShowJournal = true;\n      $(\".el-dialog__title\").text(\"Show Journal Entry\");\n      Meteor.call(\"queryJournalByIdShow\", row._id, function (err, result) {\n        if (result) {\n          vm.journalDetail = result;\n        } else {\n          console.log(err.message);\n        }\n      });\n    },\n    findJournalById: function (doc) {\n      var vm = this;\n      this.journalId = doc.row._id;\n      Meteor.call(\"queryJournalById\", doc.row._id, function (err, result) {\n        vm.journalData = [];\n\n        if (result) {\n          result.transaction.forEach(function (obj) {\n            Meteor.call(\"queryChartAccountById\", obj.account, function (err, data) {\n              vm.journalData.push({\n                account: obj.account,\n                accountName: data.code + \" : \" + data.name,\n                dr: obj.dr,\n                cr: obj.cr\n              });\n              vm.getTotalDrCr();\n            });\n          });\n          vm.journalForm.journalDate = result.journalDate;\n          vm.journalForm.currencyId = result.currencyId;\n          vm.journalForm.memo = result.memo;\n          vm.journalForm.name = result.name;\n          vm.journalForm.voucherId = result.voucherId.substr(8, 20);\n        }\n      });\n    },\n    addToJournalData: function () {\n      var vm = this;\n\n      if (vm.journalForm.account == \"\" || vm.journalForm.account == undefined) {\n        this.$message({\n          duration: 1000,\n          message: \"Account Can't Empty!!\",\n          type: 'error'\n        });\n        return false;\n      }\n\n      Meteor.call(\"queryChartAccountById\", vm.journalForm.account, function (err, data) {\n        if (data) {\n          vm.journalData.push({\n            account: vm.journalForm.account,\n            accountName: data.code + \" : \" + data.name,\n            dr: vm.$_numeral(vm.journalForm.dr).value(),\n            cr: vm.$_numeral(vm.journalForm.cr).value()\n          });\n          vm.journalForm.account = \"\";\n          vm.$message({\n            duration: 1000,\n            message: \"\\u1794\\u1793\\u17D2\\u1790\\u17C2\\u1798 \" + data.code + \" : \" + data.name + \" បានជោគជ័យ !\",\n            type: 'success'\n          });\n          vm.getTotalDrCr();\n        } else {\n          vm.$message({\n            duration: 1000,\n            message: \"មិនមានឈ្មេាះគណនីនេះឡើយ!!\",\n            type: 'error'\n          });\n        }\n      });\n    },\n    addToJournalPaymentReceiveData: function () {\n      var vm = this;\n\n      if (vm.journalForm.account == \"\" || vm.journalForm.account == undefined) {\n        this.$message({\n          duration: 1000,\n          message: \"Account Can't Empty!!\",\n          type: 'error'\n        });\n        return false;\n      }\n\n      Meteor.call(\"queryChartAccountById\", vm.journalForm.account, function (err, data) {\n        if (data) {\n          vm.journalData.push({\n            account: vm.journalForm.account,\n            accountName: data.code + \" : \" + data.name,\n            amount: vm.$_numeral(vm.journalForm.amount).value()\n          });\n          vm.journalForm.account = \"\";\n          vm.$message({\n            duration: 1000,\n            message: \"\\u1794\\u1793\\u17D2\\u1790\\u17C2\\u1798 \" + data.code + \" : \" + data.name + \" បានជោគជ័យ !\",\n            type: 'success'\n          });\n          vm.getTotalAmount();\n        } else {\n          vm.$message({\n            duration: 1000,\n            message: \"មិនមានឈ្មេាះគណនីនេះឡើយ!!\",\n            type: 'error'\n          });\n        }\n      });\n    },\n    removeJournalDetailByIndex: function (index, row) {\n      var _this8 = this;\n\n      this.$confirm('This will permanently delete the file. Continue?', 'Warning', {\n        confirmButtonText: 'OK',\n        cancelButtonText: 'Cancel',\n        type: 'warning'\n      }).then(function () {\n        _this8.journalData.splice(index, 1);\n\n        _this8.$message({\n          message: \"\\u179B\\u17BB\\u1794 \" + row.accountName + \" \\u1794\\u17B6\\u1793\\u1787\\u17C4\\u1782\\u1787\\u17D0\\u1799\",\n          type: 'success'\n        });\n\n        _this8.getTotalDrCr();\n      }).catch(function () {\n        _this8.$message({\n          type: 'info',\n          message: 'Delete canceled'\n        });\n      });\n    },\n    updateJournalDetail: function (row, index) {\n      this.journalData[index] = row;\n      var newIndex = index + 1;\n      /*this.$message({\n          duration: 1000,\n          message: `Update Row Number ` + newIndex + \" Successfully !\",\n          type: 'success'\n      });*/\n\n      this.getTotalDrCr();\n    },\n    updateJournalDetailPaymentReceive: function (row, index) {\n      this.journalData[index] = row;\n      var newIndex = index + 1;\n      /*this.$message({\n          duration: 1000,\n          message: `Update Row Number ` + newIndex + \" Successfully !\",\n          type: 'success'\n      });*/\n\n      this.getTotalAmount();\n    },\n    cancel: function () {\n      this.$message({\n        type: 'info',\n        message: 'Canceled'\n      });\n    },\n    resetForm: function () {\n      this.journalData = [];\n      this.journalForm.method = \"\";\n\n      if (this.$refs[\"journalFormAdd\"]) {\n        this.$refs[\"journalFormAdd\"].resetFields();\n        this.getTotalDrCr();\n      }\n\n      if (this.$refs[\"journalFormUpdate\"]) {\n        this.$refs[\"journalFormUpdate\"].resetFields();\n        this.getTotalDrCr();\n      }\n\n      if (this.$refs[\"journalFormPayment\"]) {\n        this.$refs[\"journalFormPayment\"].resetFields();\n        this.getTotalAmount();\n      }\n\n      this.journalForm.name = \"\";\n      this.autoIncreseVouchers();\n    },\n    getTotalDrCr: function () {\n      var vm = this;\n      var totalDr = 0;\n      var totalCr = 0;\n      vm.journalData.forEach(function (obj) {\n        totalDr += parseFloat(obj.dr);\n        totalCr += parseFloat(obj.cr);\n      });\n      vm.journalForm.totalDr = this.$_numeral(totalDr).format(\"0,00.000\");\n      vm.journalForm.totalCr = this.$_numeral(totalCr).format(\"0,00.000\");\n      vm.setFormInputDrCr();\n    },\n    getTotalAmount: function () {\n      var vm = this;\n      var totalAmount = 0;\n      vm.journalData.forEach(function (obj) {\n        totalAmount += parseFloat(obj.amount);\n      });\n      vm.journalForm.totalAmount = this.$_numeral(totalAmount).format(\"0,00.000\");\n      vm.setFormInputAmount();\n    },\n    setFormInputDrCr: function () {\n      this.journalForm.dr = parseFloat(this.$_numeral(this.journalForm.totalDr).value()) - parseFloat(this.$_numeral(this.journalForm.totalCr).value()) > 0 ? 0 : -(parseFloat(this.$_numeral(this.journalForm.totalDr).value()) - parseFloat(this.$_numeral(this.journalForm.totalCr).value()));\n      this.journalForm.cr = parseFloat(this.$_numeral(this.journalForm.totalDr).value()) - parseFloat(this.$_numeral(this.journalForm.totalCr).value()) > 0 ? parseFloat(this.$_numeral(this.journalForm.totalDr).value()) - parseFloat(this.$_numeral(this.journalForm.totalCr).value()) : 0;\n\n      this._inputMaskJournal();\n    },\n    setFormInputAmount: function () {\n      var vm = this;\n      vm.journalForm.amount = 0;\n\n      vm._inputMaskJournal();\n    },\n    checkDrCr: function () {\n      var vm = this;\n\n      if (vm.$_numeral(vm.journalForm.totalDr).value() === vm.$_numeral(vm.journalForm.totalCr).value()) {\n        return true;\n      }\n\n      return false;\n    },\n    autoIncreseVouchers: function (val) {\n      var vm = this;\n\n      if (val) {\n        vm.journalForm.journalDate = val;\n      }\n\n      Meteor.call(\"autoIncreseVoucher\", Session.get('area'), vm.journalForm.journalDate, vm.journalForm.currencyId, function (err, result) {\n        if (!err) {\n          vm.journalForm.voucherId = (parseInt(result) + 1).toString();\n        }\n      });\n    }\n  },\n  created: function () {\n    this.isSearching = true;\n    this.chartAccountOption();\n    this.chartAccountMethodOption();\n    this.queryData();\n    Meteor.subscribe('Acc_JournalReact');\n  },\n  computed: {\n    langConfig: function () {\n      var _this9 = this;\n\n      var data = compoLang.filter(function (config) {\n        return config.lang === _this9.langSession;\n      })[0]['journal'];\n      return data;\n    }\n  }\n});","map":{"version":3,"sources":["/home/snr/Desktop/Project/spa/imports/vue/ui/accJournal.vue"],"names":["draggable","module","link","v","compoLang","Acc_JournalReact","exportDefault","meteor","langSession","Session","get","disabledRemove","disabledUpdate","newRe","vm","find","fetch","queryData","searchData","skip","currentSize","components","data","fullscreen","journalData","journalDataDisplay","multipleSelection","journalId","loading","isSearching","currentPage","count","dialogAddJournal","dialogUpdateJournal","dialogShowJournal","dialogPaid","journalForm","account","dr","cr","journalDate","moment","toDate","currencyId","voucherId","name","memo","totalDr","totalCr","totalAmount","amount","method","rules","type","required","message","trigger","rulesPayment","chartAccountDataOption","dialog","notifications","sound","widgets","labelPosition","options","disabledDate","time","closeDate","methodOption","journalDetail","mounted","$jQuery","off","min","add","getTime","elem","checkEvent","$","_data","keyup","length","$nextTick","on","inputHandler","watch","val","autoIncreseVouchers","undefined","_inputMaskJournal","methods","handleSizeChange","handleCurrentChange","setTimeout","$_Cleave","numeral","numeralThousandsGroupStyle","_","debounce","limit","Meteor","call","q","filter","err","result","content","countJournal","e","init","selector","keyCode","ctrlKey","altKey","preventDefault","saveJournal","saveJournalPaid","popupJournalAdd","resetForm","chartAccountOption","accountTypeId","chartAccountMethodOption","isCloseDialog","event","checkSubmit","checkDrCr","$notify","error","title","$refs","validate","valid","journalDoc","journalDateName","format","total","$_numeral","value","rolesArea","transaction","$message","duration","isPrint","FlowRouter","go","printPaymentInvoice","updateJournal","id","removeJournal","index","row","rows","status","re","$confirm","confirmButtonText","cancelButtonText","then","_id","splice","catch","text","popupJournalPayment","popupJournalReceive","popupJournalUpdate","scope","findJournalById","popupJournalShow","console","log","doc","forEach","obj","push","accountName","code","getTotalDrCr","substr","addToJournalData","addToJournalPaymentReceiveData","getTotalAmount","removeJournalDetailByIndex","updateJournalDetail","newIndex","updateJournalDetailPaymentReceive","cancel","resetFields","parseFloat","setFormInputDrCr","setFormInputAmount","parseInt","toString","created","subscribe","computed","langConfig","config","lang"],"mappings":"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","sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport draggable from 'vuedraggable';\nimport compoLang from '../../../both/i18n/lang/elem-label-acc'\nimport {Acc_JournalReact} from \"../../collection/accJournal\";\n\n// require('cleave.js/dist/addons/cleave-phone.ac');\n// require('cleave.js/dist/addons/cleave-phone.{country}');\n\nexport default {\n    meteor: {\n        langSession() {\n            return Session.get('lang') || \"en\";\n        },\n        disabledRemove() {\n            return Session.get(\"canRemove\");\n        },\n        disabledUpdate() {\n            return Session.get(\"canUpdate\");\n        },\n        newRe() {\n            let vm = this;\n            Acc_JournalReact.find({}).fetch();\n            vm.queryData(vm.searchData, vm.skip, vm.currentSize + vm.skip);\n        }\n    },\n\n    components: {\n        draggable\n    },\n    data() {\n        return {\n            fullscreen: true,\n            journalData: [],\n            journalDataDisplay: [],\n            multipleSelection: [],\n            journalId: \"\",\n            loading: false,\n            searchData: '',\n            isSearching: false,\n            currentPage: 1,\n            currentSize: 10,\n            count: 0,\n            dialogAddJournal: false,\n            dialogUpdateJournal: false,\n            dialogShowJournal: false,\n            dialogPaid: false,\n\n\n            journalForm: {\n                account: \"\",\n                dr: 0,\n                cr: 0,\n                journalDate: moment().toDate(),\n                currencyId: \"KHR\",\n                voucherId: \"\",\n                name: \"\",\n                memo: \"\",\n                totalDr: 0,\n                totalCr: 0,\n                totalAmount: 0,\n                amount: 0,\n                method: \"\"\n\n            },\n            rules: {\n                journalDate: [{\n                    type: 'date',\n                    required: true,\n                    message: 'Please input Journal Date',\n                    trigger: 'blur'\n                }],\n                currencyId: [{required: true, type: 'string', message: 'Please input Currency', trigger: 'blur'}],\n                voucherId: [{required: true, type: 'string', message: 'Please input Journal No', trigger: 'blur'}],\n                memo: [{required: true, type: 'string', message: 'Please input Memo', trigger: 'blur'}],\n            },\n            rulesPayment: {\n                journalDate: [{\n                    type: 'date',\n                    required: true,\n                    message: 'Please input Journal Date',\n                    trigger: 'blur'\n                }],\n                currencyId: [{required: true, type: 'string', message: 'Please input Currency', trigger: 'blur'}],\n                method: [{required: true, type: 'string', message: 'Please input Cash Method', trigger: 'blur'}],\n                voucherId: [{required: true, type: 'string', message: 'Please input Journal No', trigger: 'blur'}],\n                memo: [{required: true, type: 'string', message: 'Please input Memo', trigger: 'blur'}],\n            },\n\n            // Options\n            chartAccountDataOption: [],\n\n            dialog: true,\n            notifications: false,\n            sound: true,\n            widgets: false,\n            labelPosition: \"top\",\n            options: {\n                disabledDate(time) {\n                    return false;\n                }\n            },\n            disabledDate: false,\n            closeDate: \"\",\n            methodOption: [],\n            type: \"\",\n            journalDetail: {},\n            skip: 0\n        }\n    },\n    mounted() {\n        this.$jQuery('body').off();\n        let vm = this;\n        vm.options = {\n            disabledDate(time) {\n                let min = moment(vm.closeDate).add(1, \"days\").toDate().getTime();\n                return time.getTime() < min;\n            }\n        }\n\n\n        let elem = this.$jQuery('el-dialog.dialogJournal');\n        let checkEvent = $._data($('body').get(0), 'events');\n        if (checkEvent.keyup.length <= 1) {\n            this.$nextTick(() => {\n                this.$jQuery('body').on('keydown', elem, this.inputHandler);\n\n            })\n        }\n    },\n    watch: {\n        currentSize(val) {\n            this.isSearching = true;\n            this.skip = (this.currentPage - 1) * val;\n            this.queryData(this.searchData, this.skip, val + this.skip);\n        },\n        currentPage(val) {\n            this.isSearching = true;\n            this.skip = (val - 1) * this.currentSize;\n            this.queryData(this.searchData, this.skip, this.currentSize + this.skip);\n        },\n        searchData(val) {\n            this.isSearching = true;\n            this.skip = (this.currentPage - 1) * this.currentSize;\n            this.queryData(val, this.skip, this.currentSize + this.skip);\n        },\n        \"journalForm.journalDate\"(val) {\n            let vm = this;\n            if (vm.dialogUpdateJournal == false) {\n                vm.journalForm.journalDate = val;\n                vm.autoIncreseVouchers(val);\n            }\n            if (vm.closeDate && vm.closeDate != \"\" && vm.closeDate != undefined) {\n                vm.options = {\n                    disabledDate(time) {\n                        let min = moment(vm.closeDate).add(1, \"days\").toDate().getTime();\n                        return time.getTime() < min;\n                    }\n                }\n            } else {\n                vm.options = {\n                    disabledDate(time) {\n                        return false;\n                    }\n                }\n            }\n        },\n        \"journalForm.currencyId\"(val) {\n            if (this.dialogUpdateJournal == false) {\n                this.journalForm.currencyId = val;\n                this.autoIncreseVouchers();\n            }\n        },\n        dialogAddJournal(val) {\n            if (val) {\n                this._inputMaskJournal();\n            }\n        },\n        dialogUpdateJournal(val) {\n            if (val) {\n                this._inputMaskJournal();\n            }\n        },\n        \"journalForm.account\"(val) {\n            if (val) {\n                this._inputMaskJournal();\n            }\n        },\n        \"journalForm.dr\"(val) {\n            if (val) {\n                this.journalForm.cr = 0;\n            }\n        },\n        \"journalForm.cr\"(val) {\n            if (val) {\n                this.journalForm.dr = 0;\n            }\n        },\n        \"journalForm.method\"(val) {\n            debugger;\n            if (val) {\n            }\n        }\n    },\n    methods: {\n        handleSizeChange(val) {\n            this.currentSize = val;\n        },\n        handleCurrentChange(val) {\n            this.currentPage = val;\n        },\n        _inputMaskJournal() {\n            setTimeout(() => {\n                if ($(\".el-inputAmount\").length) {\n                    new this.$_Cleave('.el-inputAmount', {\n                        numeral: true,\n                        numeralThousandsGroupStyle: 'thousand'\n                    });\n                }\n\n                if ($(\".el-inputDR\").length) {\n                    new this.$_Cleave('.el-inputDR', {\n                        numeral: true,\n                        numeralThousandsGroupStyle: 'thousand'\n                    });\n                }\n\n                if ($(\".el-inputCR\").length) {\n                    new this.$_Cleave('.el-inputCR', {\n                        numeral: true,\n                        numeralThousandsGroupStyle: 'thousand'\n                    });\n                }\n\n\n            }, 200)\n        },\n        queryData: _.debounce(function (val, skip, limit) {\n            Meteor.call('queryJournal', {\n                q: val,\n                filter: this.filter,\n                options: {skip: skip || 0, limit: limit || 10}\n            }, (err, result) => {\n                if (!err) {\n                    this.journalDataDisplay = result.content;\n                    this.count = result.countJournal;\n                }\n                this.isSearching = false;\n            });\n        }, 300),\n\n        inputHandler(e) {\n            if (e.data.init(0).selector === \"el-dialog.dialogJournal\") {\n                let vm = this;\n                if (vm.dialogAddJournal === true) {\n                    if (e.keyCode === 13 && e.ctrlKey && !e.altKey) {\n                        e.preventDefault();\n                        vm.saveJournal(true, e);\n                    } else if (e.keyCode === 13 && e.ctrlKey && e.altKey) {\n                        e.preventDefault();\n                        vm.saveJournal(false, e);\n                    }\n                } else if (vm.dialogPaid === true) {\n                    if (e.keyCode === 13 && e.ctrlKey && !e.altKey) {\n                        e.preventDefault();\n                        vm.saveJournalPaid(true, e, vm.type);\n                    } else if (e.keyCode === 13 && e.ctrlKey && e.altKey) {\n                        e.preventDefault();\n                        vm.saveJournalPaid(false, e, vm.type);\n\n                    }\n                }\n\n                if (vm.dialogAddJournal === false && vm.dialogUpdateJournal === false && vm.dialogPaid === false) {\n                    if (e.keyCode === 107 && !e.ctrlKey && !e.altKey) {\n                        e.preventDefault();\n                        vm.popupJournalAdd();\n                        vm.dialogAddJournal = true;\n                        vm.autoIncreseVouchers();\n                        vm.resetForm();\n                    }\n                }\n                if (e.keyCode === 27 && !e.ctrlKey && !e.altKey) {\n                    e.preventDefault();\n                    vm.dialogAddJournal = false;\n                }\n            }\n\n\n        },\n        chartAccountOption() {\n            let selector = {};\n            if (this.accountTypeId !== \"\" && this.accountTypeId !== undefined) {\n                selector.accountTypeId = this.accountTypeId;\n            }\n\n            Meteor.call('queryChartAccountOption', selector, (err, result) => {\n                this.chartAccountDataOption = result;\n            })\n        },\n        chartAccountMethodOption() {\n            let selector = {};\n            if (this.accountTypeId !== \"\" && this.accountTypeId !== undefined) {\n                selector.accountTypeId = this.accountTypeId;\n            }\n            Meteor.call('queryChartAccountMethodOption', selector, (err, result) => {\n                this.methodOption = result;\n            })\n        },\n        saveJournal(isCloseDialog, event) {\n            event.preventDefault();\n            let vm = this;\n            let checkSubmit = this.checkDrCr();\n            if (checkSubmit === false || vm.journalData.length === 0) {\n                vm.$notify.error({\n                    title: 'Error',\n                    message: 'Dr and Cr is not balance!'\n\n                });\n\n                return false;\n            } else {\n                this.$refs[\"journalFormAdd\"].validate((valid) => {\n                    if (valid) {\n                        let journalDoc = {\n                            journalDate: vm.journalForm.journalDate,\n                            journalDateName: moment(vm.journalForm.journalDate).format(\"DD/MM/YYYY\"),\n                            voucherId: vm.journalForm.voucherId,\n                            currencyId: vm.journalForm.currencyId,\n                            name: vm.journalForm.name,\n                            memo: vm.journalForm.memo,\n                            total: vm.$_numeral(vm.journalForm.totalDr).value(),\n                            rolesArea: Session.get('area')\n                        };\n                        journalDoc.transaction = vm.journalData;\n                        Meteor.call(\"insertJournal\", journalDoc, (err, result) => {\n                            if (!err) {\n                                vm.$message({\n                                    duration: 1000,\n                                    message: `Save Successfully!`,\n                                    type: 'success'\n                                });\n\n                                if (isCloseDialog) {\n                                    this.dialogAddJournal = false;\n                                }\n                                vm.resetForm();\n                            }\n                        })\n                    }\n                })\n            }\n\n\n        },\n        saveJournalPaid(isCloseDialog, event, type, isPrint) {\n            event.preventDefault();\n            let vm = this;\n            this.$refs[\"journalFormPayment\"].validate((valid) => {\n                if (valid) {\n                    let journalDoc = {\n                        journalDate: vm.journalForm.journalDate,\n                        journalDateName: moment(vm.journalForm.journalDate).format(\"DD/MM/YYYY\"),\n                        voucherId: vm.journalForm.voucherId,\n                        currencyId: vm.journalForm.currencyId,\n                        name: vm.journalForm.name,\n                        memo: vm.journalForm.memo,\n                        total: vm.$_numeral(vm.journalForm.totalAmount).value(),\n                        rolesArea: Session.get('area'),\n                        method: vm.journalForm.method\n                    };\n                    journalDoc.transaction = vm.journalData;\n                    if (journalDoc.transaction.length <= 0) {\n                        vm.$message({\n                            duration: 1000,\n                            message: `Add Payment Account!`,\n                            type: 'error'\n                        });\n                        return false;\n                    }\n\n                    Meteor.call(\"insertJournalPaid\", journalDoc, type, (err, result) => {\n                        if (!err) {\n                            if (isPrint === true) {\n                                FlowRouter.go('/acc-data/accPayment/print?inv=' + result);\n\n                            } else {\n                                vm.$message({\n                                    duration: 1000,\n                                    message: `Save Successfully!`,\n                                    type: 'success'\n                                });\n\n                            }\n\n                            if (isCloseDialog) {\n                                this.dialogPaid = false;\n                            }\n                            vm.resetForm();\n                        }\n                    })\n                }\n            })\n\n\n        },\n        printPaymentInvoice(journalId) {\n            FlowRouter.go('/acc-data/accPayment/print?inv=' + journalId);\n        },\n        updateJournal(id) {\n            event.preventDefault();\n            let vm = this;\n            let checkSubmit = vm.checkDrCr();\n            if (checkSubmit === false || vm.journalData.length === 0) {\n                vm.$notify.error({\n                    title: 'Error',\n                    message: 'Dr and Cr is not balance!'\n                });\n                return false;\n            } else {\n                vm.$refs[\"journalFormUpdate\"].validate((valid) => {\n                    if (valid) {\n                        let journalDoc = {\n                            journalDate: vm.journalForm.journalDate,\n                            journalDateName: moment(vm.journalForm.journalDate).format(\"DD/MM/YYYY\"),\n                            voucherId: vm.journalForm.voucherId,\n                            currencyId: vm.journalForm.currencyId,\n                            name: vm.journalForm.name,\n                            memo: vm.journalForm.memo,\n                            total: vm.$_numeral(vm.journalForm.totalDr).value(),\n                            rolesArea: Session.get('area')\n                        };\n                        journalDoc.transaction = vm.journalData;\n                        Meteor.call(\"updateJournal\", journalDoc, id, (err, result) => {\n                            if (!err) {\n                                vm.$message({\n                                    duration: 1000,\n                                    message: `Save Successfully!`,\n                                    type: 'success'\n                                });\n\n                                vm.dialogUpdateJournal = false;\n\n                                vm.resetForm();\n                            }\n                        })\n                    }\n                })\n            }\n\n        },\n        removeJournal(index, row, rows) {\n            let vm = this;\n            if (row.status == \"Normal\") {\n                Meteor.call(\"queryLastClosingEntry\", Session.get(\"area\"), function (err, re) {\n                    if (re == undefined || re.closeDate.getTime() < row.journalDate.getTime()) {\n                        vm.$confirm('This will permanently delete the file. Continue?', 'Warning', {\n                            confirmButtonText: 'OK',\n                            cancelButtonText: 'Cancel',\n                            type: 'warning'\n                        }).then(() => {\n\n\n                            Meteor.call(\"removeJournal\", row._id, (err, result) => {\n                                if (!err) {\n                                    rows.splice(index, 1);\n                                    vm.$message({\n                                        message: `លុប ${row.journalDateName}​ : ${row.voucherId} បានជោគជ័យ`,\n                                        type: 'success'\n                                    });\n                                } else {\n                                    vm.$message({\n                                        type: 'error',\n                                        message: 'Delete Fialed'\n                                    });\n                                }\n\n                            })\n\n\n                        }).catch(() => {\n                            vm.$message({\n                                type: 'info',\n                                message: 'Delete canceled'\n                            });\n                        });\n                    } else {\n                        vm.$message({\n                            duration: 1000,\n                            message: \"You already Closing Entry!!\",\n                            type: 'error'\n                        });\n                    }\n                })\n            } else {\n                vm.$message({\n                    duration: 1000,\n                    message: \"Not Normal State!!\",\n                    type: 'error'\n                });\n            }\n\n\n        },\n        popupJournalAdd() {\n            let vm = this;\n            $(\".el-dialog__title\").text(\"Add Journal Entry\");\n            Meteor.call(\"queryLastClosingEntry\", Session.get(\"area\"), function (err, re) {\n                if (re != undefined) {\n                    vm.closeDate = re.closeDate;\n                } else {\n                    vm.closeDate = \"\";\n                }\n            })\n        },\n        popupJournalPayment() {\n            let vm = this;\n            vm.type = \"Payment\";\n            // $('#dialog').attr('title', 'New Title').dialog();\n\n            $(\".el-dialog__title\").text(\"Payment (Account)\");\n            vm.journalForm.method = \"\";\n\n            Meteor.call(\"queryLastClosingEntry\", Session.get(\"area\"), function (err, re) {\n                if (re != undefined) {\n                    vm.closeDate = re.closeDate;\n                } else {\n                    vm.closeDate = \"\";\n                }\n            })\n        },\n        popupJournalReceive() {\n            let vm = this;\n            vm.type = \"Receive\";\n            vm.journalForm.method = \"\";\n\n            // $('#dialog').attr('title', 'New Title').dialog();\n            $(\".el-dialog__title\").text(\"Receive (Account)\");\n\n            Meteor.call(\"queryLastClosingEntry\", Session.get(\"area\"), function (err, re) {\n                if (re !== undefined) {\n                    vm.closeDate = re.closeDate;\n                } else {\n                    vm.closeDate = \"\";\n                }\n            })\n        },\n        popupJournalUpdate(index, row, scope) {\n            let vm = this;\n            $(\".el-dialog__title\").text(\"Update Journal Entry\");\n            if (row.status === \"Normal\") {\n                Meteor.call(\"queryLastClosingEntry\", Session.get(\"area\"), function (err, re) {\n                    if (re === undefined || re.closeDate.getTime() < row.journalDate.getTime()) {\n                        vm.dialogUpdateJournal = true;\n                        vm.findJournalById(scope);\n                        if (re !== undefined) {\n                            vm.closeDate = re.closeDate;\n                        } else {\n                            vm.closeDate = \"\";\n                        }\n\n                    } else {\n                        vm.$message({\n                            duration: 1000,\n                            message: \"You already Closing Entry!!\",\n                            type: 'error'\n                        });\n                        vm.dialogUpdateJournal = false;\n                        vm.closeDate = \"\";\n                    }\n                })\n            } else {\n                vm.closeDate = \"\";\n                this.$message({\n                    duration: 1000,\n                    message: \"Not Normal State!!\",\n                    type: 'error'\n                });\n            }\n        },\n        popupJournalShow(row) {\n            let vm = this;\n            this.dialogShowJournal = true;\n            $(\".el-dialog__title\").text(\"Show Journal Entry\");\n            Meteor.call(\"queryJournalByIdShow\", row._id, (err, result) => {\n                if (result) {\n                    vm.journalDetail = result;\n                } else {\n                    console.log(err.message);\n                }\n            })\n        },\n        findJournalById(doc) {\n            let vm = this;\n            this.journalId = doc.row._id;\n\n            Meteor.call(\"queryJournalById\", doc.row._id, (err, result) => {\n                vm.journalData = [];\n                if (result) {\n                    result.transaction.forEach(function (obj) {\n                        Meteor.call(\"queryChartAccountById\", obj.account, (err, data) => {\n                            vm.journalData.push({\n                                account: obj.account,\n                                accountName: data.code + \" : \" + data.name,\n                                dr: obj.dr,\n                                cr: obj.cr\n                            })\n\n                            vm.getTotalDrCr();\n                        })\n                    });\n                    vm.journalForm.journalDate = result.journalDate;\n                    vm.journalForm.currencyId = result.currencyId;\n                    vm.journalForm.memo = result.memo;\n                    vm.journalForm.name = result.name;\n                    vm.journalForm.voucherId = result.voucherId.substr(8, 20);\n                }\n            })\n\n        },\n        addToJournalData() {\n            let vm = this;\n            if (vm.journalForm.account == \"\" || vm.journalForm.account == undefined) {\n                this.$message({\n                    duration: 1000,\n                    message: \"Account Can't Empty!!\",\n                    type: 'error'\n                });\n                return false;\n            }\n\n            Meteor.call(\"queryChartAccountById\", vm.journalForm.account, (err, data) => {\n                if (data) {\n                    vm.journalData.push({\n                        account: vm.journalForm.account,\n                        accountName: data.code + \" : \" + data.name,\n                        dr: vm.$_numeral(vm.journalForm.dr).value(),\n                        cr: vm.$_numeral(vm.journalForm.cr).value()\n                    })\n                    vm.journalForm.account = \"\";\n\n                    vm.$message({\n                        duration: 1000,\n                        message: `បន្ថែម ` + data.code + \" : \" + data.name + \" បានជោគជ័យ !\",\n                        type: 'success'\n                    });\n                    vm.getTotalDrCr();\n                } else {\n                    vm.$message({\n                        duration: 1000,\n                        message: \"មិនមានឈ្មេាះគណនីនេះឡើយ!!\",\n                        type: 'error'\n                    });\n                }\n            })\n\n\n        },\n        addToJournalPaymentReceiveData() {\n\n            let vm = this;\n            if (vm.journalForm.account == \"\" || vm.journalForm.account == undefined) {\n                this.$message({\n                    duration: 1000,\n                    message: \"Account Can't Empty!!\",\n                    type: 'error'\n                });\n                return false;\n            }\n            Meteor.call(\"queryChartAccountById\", vm.journalForm.account, (err, data) => {\n                if (data) {\n                    vm.journalData.push({\n                        account: vm.journalForm.account,\n                        accountName: data.code + \" : \" + data.name,\n                        amount: vm.$_numeral(vm.journalForm.amount).value(),\n                    })\n                    vm.journalForm.account = \"\";\n\n                    vm.$message({\n                        duration: 1000,\n                        message: `បន្ថែម ` + data.code + \" : \" + data.name + \" បានជោគជ័យ !\",\n                        type: 'success'\n                    });\n                    vm.getTotalAmount();\n                } else {\n                    vm.$message({\n                        duration: 1000,\n                        message: \"មិនមានឈ្មេាះគណនីនេះឡើយ!!\",\n                        type: 'error'\n                    });\n                }\n\n\n            })\n        },\n        removeJournalDetailByIndex(index, row) {\n            this.$confirm('This will permanently delete the file. Continue?', 'Warning', {\n                confirmButtonText: 'OK',\n                cancelButtonText: 'Cancel',\n                type: 'warning'\n            }).then(() => {\n\n                this.journalData.splice(index, 1);\n                this.$message({\n                    message: `លុប ${row.accountName} បានជោគជ័យ`,\n                    type: 'success'\n                });\n                this.getTotalDrCr();\n\n            }).catch(() => {\n                this.$message({\n                    type: 'info',\n                    message: 'Delete canceled'\n                });\n            });\n        },\n        updateJournalDetail(row, index) {\n            this.journalData[index] = row;\n            let newIndex = index + 1;\n            /*this.$message({\n                duration: 1000,\n                message: `Update Row Number ` + newIndex + \" Successfully !\",\n                type: 'success'\n            });*/\n            this.getTotalDrCr();\n\n        },\n        updateJournalDetailPaymentReceive(row, index) {\n            this.journalData[index] = row;\n            let newIndex = index + 1;\n            /*this.$message({\n                duration: 1000,\n                message: `Update Row Number ` + newIndex + \" Successfully !\",\n                type: 'success'\n            });*/\n            this.getTotalAmount();\n\n        },\n        cancel() {\n            this.$message({\n                type: 'info',\n                message: 'Canceled'\n            });\n        },\n        resetForm() {\n            this.journalData = [];\n            this.journalForm.method = \"\";\n            if (this.$refs[\"journalFormAdd\"]) {\n                this.$refs[\"journalFormAdd\"].resetFields();\n                this.getTotalDrCr();\n\n            }\n            if (this.$refs[\"journalFormUpdate\"]) {\n                this.$refs[\"journalFormUpdate\"].resetFields();\n                this.getTotalDrCr();\n            }\n            if (this.$refs[\"journalFormPayment\"]) {\n                this.$refs[\"journalFormPayment\"].resetFields();\n                this.getTotalAmount();\n            }\n            this.journalForm.name = \"\";\n            this.autoIncreseVouchers();\n        },\n        getTotalDrCr() {\n            let vm = this;\n            let totalDr = 0;\n            let totalCr = 0;\n            vm.journalData.forEach(function (obj) {\n                totalDr += parseFloat(obj.dr);\n                totalCr += parseFloat(obj.cr);\n            });\n            vm.journalForm.totalDr = this.$_numeral(totalDr).format(\"0,00.000\");\n            vm.journalForm.totalCr = this.$_numeral(totalCr).format(\"0,00.000\");\n            vm.setFormInputDrCr();\n        },\n        getTotalAmount() {\n            let vm = this;\n            let totalAmount = 0;\n\n            vm.journalData.forEach(function (obj) {\n                totalAmount += parseFloat(obj.amount);\n            });\n\n            vm.journalForm.totalAmount = this.$_numeral(totalAmount).format(\"0,00.000\");\n            vm.setFormInputAmount();\n        },\n        setFormInputDrCr() {\n            this.journalForm.dr = parseFloat(this.$_numeral(this.journalForm.totalDr).value()) - parseFloat(this.$_numeral(this.journalForm.totalCr).value()) > 0 ? 0 : -(parseFloat(this.$_numeral(this.journalForm.totalDr).value()) - parseFloat(this.$_numeral(this.journalForm.totalCr).value()));\n            this.journalForm.cr = parseFloat(this.$_numeral(this.journalForm.totalDr).value()) - parseFloat(this.$_numeral(this.journalForm.totalCr).value()) > 0 ? (parseFloat(this.$_numeral(this.journalForm.totalDr).value()) - parseFloat(this.$_numeral(this.journalForm.totalCr).value())) : 0;\n            this._inputMaskJournal();\n        },\n        setFormInputAmount() {\n            let vm = this;\n            vm.journalForm.amount = 0;\n            vm._inputMaskJournal();\n        },\n        checkDrCr() {\n            let vm = this;\n            if (vm.$_numeral(vm.journalForm.totalDr).value() === vm.$_numeral(vm.journalForm.totalCr).value()) {\n                return true;\n            }\n            return false;\n        },\n        autoIncreseVouchers(val) {\n            let vm = this;\n            if (val) {\n                vm.journalForm.journalDate = val;\n            }\n            Meteor.call(\"autoIncreseVoucher\", Session.get('area'), vm.journalForm.journalDate, vm.journalForm.currencyId, (err, result) => {\n                if (!err) {\n                    vm.journalForm.voucherId = (parseInt(result) + 1).toString();\n                }\n            })\n        }\n    },\n    created() {\n        this.isSearching = true;\n        this.chartAccountOption();\n        this.chartAccountMethodOption();\n        this.queryData();\n        Meteor.subscribe('Acc_JournalReact');\n\n    },\n    computed: {\n        langConfig() {\n            let data = compoLang.filter(config => config.lang === this.langSession)[0]['journal'];\n            return data;\n        }\n    }\n}\n\n\n"]},"sourceType":"script","hash":"1f5555ba27efb932601c4c77bf5c50defd87e295"}
