{"metadata":{},"options":{"plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"base$0$2","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{}},{"key":"base$0$3","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"base$0$0$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$2","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$3","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$4","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$5","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$6","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$7","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$8","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$9","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$10","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$11","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$12","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$13","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$14","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$15","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$16","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$17","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$18","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$19","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$20","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$21","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"ClassPrivateProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$0$22","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$23","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]}},"options":{}}],"presets":[],"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/home/snr/Desktop/Project/spa/imports/vue/ui/WaterBillingSetup.vue","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","dynamicImport",["flow",{}],"asyncGenerators","objectRestSpread","objectRestSpread",["flow",{}],"asyncGenerators"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"strictMode":false},"sourceFileName":"/home/snr/Desktop/Project/spa/imports/vue/ui/WaterBillingSetup.vue","filename":"/home/snr/Desktop/Project/spa/imports/vue/ui/WaterBillingSetup.vue","passPerPreset":false,"envName":"development","cwd":"/home/snr/Desktop/Project/spa","root":"/home/snr/Desktop/Project/spa","generatorOpts":{"filename":"/home/snr/Desktop/Project/spa/imports/vue/ui/WaterBillingSetup.vue","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"/home/snr/Desktop/Project/spa/imports/vue/ui/WaterBillingSetup.vue"}},"code":"var WB_waterBillingSetup;\nmodule.link(\"../../collection/waterBillingSetup.js\", {\n  WB_waterBillingSetup: function (v) {\n    WB_waterBillingSetup = v;\n  }\n}, 0);\nmodule.exportDefault({\n  data: function () {\n    return {\n      isShowing: false,\n      tableData: [],\n      dialogFormVisible: false,\n      showClosed: false,\n      activeName: 'first',\n      rolesArea: '',\n      companyId: '',\n      waterBillingUsageShortNameOptions: [{\n        label: 'En',\n        value: 'en'\n      }, {\n        label: 'Kh',\n        value: 'kh'\n      }],\n      depreciationPerTimeOption: [{\n        label: \"1 Month\",\n        value: 1\n      }, {\n        label: \"2 Month\",\n        value: 2\n      }, {\n        label: \"3 Month\",\n        value: 3\n      }, {\n        label: \"4 Month\",\n        value: 4\n      }, {\n        label: \"6 Month\",\n        value: 6\n      }, {\n        label: \"12 Month\",\n        value: 12\n      }],\n      form: {\n        cutValue: 480,\n        invoiceExpiredAfter: 0,\n        khName: '',\n        enName: '',\n        ministryKhName: '',\n        ministryEnName: '',\n        khShortName: '',\n        enableZeroWaterConsumption: false,\n        enShortName: '',\n        waterBillingUsageShortName: '',\n        baseCurrency: \"KHR\",\n        roundType: \"\",\n        khrDigit: -2,\n        usdDigit: 2,\n        thbDigit: 0,\n        address: \"\",\n        phoneNumber: \"\",\n        email: \"\",\n        website: \"\",\n        director: \"\",\n        province: \"\",\n        khAddress: \"\",\n        integratedPosAccount: false,\n        depreciationType: \"\",\n        depreciationPerTime: 12,\n        validateStock: false\n      },\n      rules: {\n        khName: [{\n          required: 'true',\n          message: 'Please Input Khmer Name',\n          trigger: 'blur'\n        }],\n        enName: [{\n          required: 'true',\n          message: 'Please Input English Name',\n          trigger: 'blur'\n        }],\n        enShortName: [{\n          required: 'true',\n          message: 'Please Input English Short Name',\n          trigger: 'blur'\n        }],\n        khShortName: [{\n          required: 'true',\n          message: 'Please Input Khmer Short Name',\n          trigger: 'blur'\n        }],\n        waterBillingUsageShortName: [{\n          required: 'true',\n          message: 'Please Select Water Billing Setup Short Name',\n          trigger: 'blur'\n        }]\n      },\n      roundTypeOption: [{\n        label: \"Normal\",\n        value: \"Normal\"\n      }, {\n        label: \"Up\",\n        value: \"Up\"\n      }, {\n        label: \"Down\",\n        value: \"Down\"\n      }],\n      depreciationTypeOption: [{\n        label: \"001 : Straight-Line Depreciation Method\",\n        value: \"001\"\n      }, {\n        label: \"002 : Double Declining Balance Depreciation Method\",\n        value: \"002\"\n      }, {\n        label: \"003 : Sum-of-the-Years-Digits Depreciation Method\",\n        value: \"003\"\n      }]\n    };\n  },\n  computed: {\n    isEmptyCompany: function () {\n      return this.tableData.length == 0;\n    }\n  },\n  methods: {\n    updateInvoiceExpired: function () {\n      var _this = this;\n\n      Meteor.call('updateWaterBillingSetup', {\n        _id: this.tableData[0]._id,\n        data: {\n          cutValue: this.form.cutValue,\n          invoiceExpiredAfter: +this.form.invoiceExpiredAfter,\n          enableZeroWaterConsumption: this.form.enableZeroWaterConsumption\n        }\n      }, function (err, result) {\n        if (!err) {\n          _this.$message({\n            message: 'Update Successfully',\n            type: 'success'\n          });\n\n          _this.fetchWaterBillingSetup();\n\n          _this.dialogFormVisible = false;\n        }\n      });\n    },\n    handleClick: function (tab, event) {//                console.log(tab, event);\n    },\n    handleEdit: function (index, row) {\n      this.dialogFormVisible = true;\n      this.companyId = row._id;\n\n      for (var k in this.form) {\n        this.form[k] = row[k];\n      }\n    },\n    handleDelete: function (index, row) {\n      console.log(index, row);\n    },\n    updateWaterBillingSetup: function (_ref) {\n      var _this2 = this;\n\n      var _id = _ref._id,\n          data = _ref.data;\n      Meteor.call('updateWaterBillingSetup', {\n        _id: _id,\n        data: data\n      }, function (err, result) {\n        if (!err) {\n          _this2.$message({\n            message: 'Update Successfully',\n            type: 'success'\n          });\n\n          _this2.fetchWaterBillingSetup();\n\n          _this2.dialogFormVisible = false;\n        }\n      });\n    },\n    insertWaterBillingSetup: function (_ref2) {\n      var _this3 = this;\n\n      var data = _ref2.data;\n      data.rolesArea = Session.get('area');\n      Meteor.call('insertWaterBillingSetup', {\n        data: data\n      }, function (err, result) {\n        if (!err) {\n          _this3.dialogFormVisible = false;\n          _this3.form = {\n            khName: '',\n            enName: '',\n            ministryKhName: '',\n            ministryEnName: '',\n            khShortName: '',\n            enShortName: '',\n            waterBillingUsageShortName: '',\n            address: '',\n            phoneNumber: '',\n            email: '',\n            website: '',\n            director: '',\n            province: '',\n            khAddress: \"\",\n            validateStock: \"\"\n          };\n\n          _this3.$message({\n            message: 'Successfully',\n            type: 'success'\n          });\n\n          if (_this3.$refs['waterBillingSetupForm']) {\n            _this3.$refs['waterBillingSetupForm'].reset();\n          }\n\n          _this3.fetchWaterBillingSetup();\n        } else {\n          _this3.$message({\n            message: err.message,\n            type: 'error'\n          });\n        }\n      });\n    },\n    saveWaterBillingSetup: function (formName) {\n      var _this4 = this;\n\n      this.$refs[formName].validate(function (valid) {\n        if (valid) {\n          if (_this4.tableData.length > 0) {\n            _this4.updateWaterBillingSetup({\n              _id: _this4.companyId,\n              data: _this4.form\n            });\n          } else {\n            _this4.insertWaterBillingSetup({\n              data: _this4.form\n            });\n          }\n        }\n      });\n    },\n    fetchWaterBillingSetup: function () {\n      var _this5 = this;\n\n      Meteor.call('fetchWaterBillingSetup', function (err, result) {\n        if (!err) {\n          _this5.tableData = result;\n          _this5.form.cutValue = result[0] && result[0].cutValue || 0;\n          _this5.form.invoiceExpiredAfter = result[0] && result[0].invoiceExpiredAfter || 0;\n          _this5.form.enableZeroWaterConsumption = result[0] && result[0].enableZeroWaterConsumption || false;\n        }\n      });\n    }\n  },\n  mounted: function () {\n    this.$jQuery('body').off();\n  },\n  created: function () {\n    this.fetchWaterBillingSetup();\n  }\n});","map":{"version":3,"sources":["/home/snr/Desktop/Project/spa/imports/vue/ui/WaterBillingSetup.vue"],"names":["WB_waterBillingSetup","module","link","v","exportDefault","data","isShowing","tableData","dialogFormVisible","showClosed","activeName","rolesArea","companyId","waterBillingUsageShortNameOptions","label","value","depreciationPerTimeOption","form","cutValue","invoiceExpiredAfter","khName","enName","ministryKhName","ministryEnName","khShortName","enableZeroWaterConsumption","enShortName","waterBillingUsageShortName","baseCurrency","roundType","khrDigit","usdDigit","thbDigit","address","phoneNumber","email","website","director","province","khAddress","integratedPosAccount","depreciationType","depreciationPerTime","validateStock","rules","required","message","trigger","roundTypeOption","depreciationTypeOption","computed","isEmptyCompany","length","methods","updateInvoiceExpired","Meteor","call","_id","err","result","$message","type","fetchWaterBillingSetup","handleClick","tab","event","handleEdit","index","row","k","handleDelete","console","log","updateWaterBillingSetup","insertWaterBillingSetup","Session","get","$refs","reset","saveWaterBillingSetup","formName","validate","valid","mounted","$jQuery","off","created"],"mappings":"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","sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n    import {WB_waterBillingSetup} from '../../collection/waterBillingSetup.js';\n\n    export default {\n        data() {\n            return {\n                isShowing: false,\n                tableData: [],\n                dialogFormVisible: false,\n                showClosed: false,\n                activeName: 'first',\n                rolesArea: '',\n                companyId: '',\n                waterBillingUsageShortNameOptions: [\n                    {\n                        label: 'En', value: 'en'\n                    },\n                    {\n                        label: 'Kh', value: 'kh'\n                    }\n                ],\n                depreciationPerTimeOption: [\n                    {label: \"1 Month\", value: 1},\n                    {label: \"2 Month\", value: 2},\n                    {label: \"3 Month\", value: 3},\n                    {label: \"4 Month\", value: 4},\n                    {label: \"6 Month\", value: 6},\n                    {label: \"12 Month\", value: 12}\n                ],\n                form: {\n                    cutValue: 480,\n                    invoiceExpiredAfter: 0,\n                    khName: '',\n                    enName: '',\n                    ministryKhName: '',\n                    ministryEnName: '',\n                    khShortName: '',\n                    enableZeroWaterConsumption: false,\n                    enShortName: '',\n                    waterBillingUsageShortName: '',\n                    baseCurrency: \"KHR\",\n                    roundType: \"\",\n                    khrDigit: -2,\n                    usdDigit: 2,\n                    thbDigit: 0,\n                    address: \"\",\n                    phoneNumber: \"\",\n                    email: \"\",\n                    website: \"\",\n                    director: \"\",\n                    province: \"\",\n                    khAddress: \"\",\n                    integratedPosAccount: false,\n                    depreciationType: \"\",\n                    depreciationPerTime: 12,\n                    validateStock: false\n                },\n                rules: {\n                    khName: [\n                        {required: 'true', message: 'Please Input Khmer Name', trigger: 'blur'}\n                    ],\n                    enName: [\n                        {required: 'true', message: 'Please Input English Name', trigger: 'blur'}\n                    ],\n                    enShortName: [\n                        {required: 'true', message: 'Please Input English Short Name', trigger: 'blur'}\n                    ],\n                    khShortName: [\n                        {required: 'true', message: 'Please Input Khmer Short Name', trigger: 'blur'}\n                    ],\n                    waterBillingUsageShortName: [\n                        {required: 'true', message: 'Please Select Water Billing Setup Short Name', trigger: 'blur'}\n                    ],\n                },\n                roundTypeOption: [\n                    {label: \"Normal\", value: \"Normal\"},\n                    {label: \"Up\", value: \"Up\"},\n                    {label: \"Down\", value: \"Down\"}\n                ],\n                depreciationTypeOption: [\n                    {label: \"001 : Straight-Line Depreciation Method\", value: \"001\"},\n                    {label: \"002 : Double Declining Balance Depreciation Method\", value: \"002\"},\n                    {label: \"003 : Sum-of-the-Years-Digits Depreciation Method\", value: \"003\"},\n                ]\n\n            }\n        },\n        computed: {\n            isEmptyCompany() {\n                return this.tableData.length == 0\n            },\n        },\n        methods: {\n            updateInvoiceExpired() {\n                Meteor.call('updateWaterBillingSetup', {\n                    _id: this.tableData[0]._id,\n                    data: {\n                        cutValue: this.form.cutValue,\n                        invoiceExpiredAfter: +this.form.invoiceExpiredAfter,\n                        enableZeroWaterConsumption: this.form.enableZeroWaterConsumption\n                    }\n                }, (err, result) => {\n                    if (!err) {\n                        this.$message({\n                            message: 'Update Successfully',\n                            type: 'success'\n                        });\n                        this.fetchWaterBillingSetup();\n                        this.dialogFormVisible = false;\n                    }\n                });\n            },\n            handleClick(tab, event) {\n//                console.log(tab, event);\n            },\n            handleEdit(index, row) {\n                this.dialogFormVisible = true;\n                this.companyId = row._id;\n                for (let k in this.form) {\n                    this.form[k] = row[k];\n                }\n            },\n            handleDelete(index, row) {\n                console.log(index, row);\n            },\n            updateWaterBillingSetup({_id, data}) {\n                Meteor.call('updateWaterBillingSetup', {_id, data}, (err, result) => {\n                    if (!err) {\n                        this.$message({\n                            message: 'Update Successfully',\n                            type: 'success'\n                        });\n                        this.fetchWaterBillingSetup();\n                        this.dialogFormVisible = false;\n                    }\n                });\n            },\n            insertWaterBillingSetup({data}) {\n                data.rolesArea = Session.get('area');\n                Meteor.call('insertWaterBillingSetup', {data}, (err, result) => {\n                    if (!err) {\n                        this.dialogFormVisible = false;\n                        this.form = {\n                            khName: '',\n                            enName: '',\n                            ministryKhName: '',\n                            ministryEnName: '',\n                            khShortName: '',\n                            enShortName: '',\n                            waterBillingUsageShortName: '',\n                            address: '',\n                            phoneNumber: '',\n                            email: '',\n                            website: '',\n                            director: '',\n                            province: '',\n                            khAddress: \"\",\n                            validateStock: \"\"\n                        };\n                        this.$message({\n                            message: 'Successfully',\n                            type: 'success'\n                        });\n                        if (this.$refs['waterBillingSetupForm']) {\n                            this.$refs['waterBillingSetupForm'].reset();\n\n                        }\n\n                        this.fetchWaterBillingSetup();\n                    } else {\n                        this.$message({\n                            message: err.message,\n                            type: 'error'\n                        })\n                    }\n                });\n            },\n            saveWaterBillingSetup(formName) {\n                this.$refs[formName].validate((valid) => {\n                    if (valid) {\n                        if (this.tableData.length > 0) {\n                            this.updateWaterBillingSetup({_id: this.companyId, data: this.form})\n                        } else {\n                            this.insertWaterBillingSetup({data: this.form});\n\n                        }\n                    }\n                });\n            },\n            fetchWaterBillingSetup() {\n                Meteor.call('fetchWaterBillingSetup', (err, result) => {\n                    if (!err) {\n                        this.tableData = result;\n                        this.form.cutValue = result[0] && result[0].cutValue || 0;\n                        this.form.invoiceExpiredAfter = result[0] && result[0].invoiceExpiredAfter || 0;\n                        this.form.enableZeroWaterConsumption = result[0] && result[0].enableZeroWaterConsumption || false;\n                    }\n                })\n            },\n        },\n        mounted() {\n            this.$jQuery('body').off();\n\n        },\n        created() {\n            this.fetchWaterBillingSetup();\n        }\n    };\n"]},"sourceType":"script","hash":"092f9fdefa390084c99351ede23eee7eb6725417"}
