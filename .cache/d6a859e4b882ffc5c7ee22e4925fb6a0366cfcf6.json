{"metadata":{},"options":{"plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"base$0$2","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{}},{"key":"base$0$3","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"base$0$0$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$2","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$3","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$4","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$5","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$6","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$7","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$8","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$9","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$10","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$11","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$12","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$13","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$14","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$15","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$16","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$17","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$18","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$19","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$20","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$21","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"ClassPrivateProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$0$22","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$23","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]}},"options":{}}],"presets":[],"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/home/snr/Desktop/Project/spa/imports/vue/ui/accClosingEntry.vue","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","dynamicImport",["flow",{}],"asyncGenerators","objectRestSpread","objectRestSpread",["flow",{}],"asyncGenerators"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"strictMode":false},"sourceFileName":"/home/snr/Desktop/Project/spa/imports/vue/ui/accClosingEntry.vue","filename":"/home/snr/Desktop/Project/spa/imports/vue/ui/accClosingEntry.vue","passPerPreset":false,"envName":"development","cwd":"/home/snr/Desktop/Project/spa","root":"/home/snr/Desktop/Project/spa","generatorOpts":{"filename":"/home/snr/Desktop/Project/spa/imports/vue/ui/accClosingEntry.vue","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"/home/snr/Desktop/Project/spa/imports/vue/ui/accClosingEntry.vue"}},"code":"var Acc_ClosingEntryReact;\nmodule.link(\"../../collection/accClosingEntry\", {\n  Acc_ClosingEntryReact: function (v) {\n    Acc_ClosingEntryReact = v;\n  }\n}, 0);\nmodule.exportDefault({\n  data: function () {\n    return {\n      closingEntryData: [],\n      journalClosingEntry: [],\n      exchangeOptions: [],\n      loading: false,\n      searchData: '',\n      isSearching: false,\n      currentPage: 1,\n      currentSize: 10,\n      count: 0,\n      dialogAddClosingEntry: false,\n      dialogUpdateClosingEntry: false,\n      closingEntryForm: {\n        closeDate: moment().toDate(),\n        exchangeId: \"\",\n        _id: \"\"\n      },\n      rules: {\n        closeDate: [{\n          type: 'date',\n          required: true,\n          message: 'Please input Journal Date',\n          trigger: 'blur'\n        }],\n        exchangeId: [{\n          required: true,\n          message: 'Please input Exchange',\n          trigger: 'blur'\n        }]\n      },\n      options: {\n        disabledDate: function (time) {\n          return false;\n        }\n      },\n      disabledDate: false,\n      closeDate: \"\",\n      skip: 0\n    };\n  },\n  watch: {\n    currentSize: function (val) {\n      this.isSearching = true;\n      this.skip = (this.currentPage - 1) * val;\n      this.queryData(this.searchData, this.skip, val + this.skip);\n    },\n    currentPage: function (val) {\n      this.isSearching = true;\n      this.skip = (val - 1) * this.currentSize;\n      this.queryData(this.searchData, this.skip, this.currentSize + this.skip);\n    },\n    searchData: function (val) {\n      this.isSearching = true;\n      this.skip = (this.currentPage - 1) * this.currentSize;\n      this.queryData(val, this.skip, this.currentSize + this.skip);\n    },\n    \"closingEntryForm.closeDate\": function (val) {\n      var vm = this;\n\n      if (vm.closeDate && vm.closeDate != \"\" && vm.closeDate != undefined) {\n        vm.options = {\n          disabledDate: function (time) {\n            var min = moment(vm.closeDate).add(1, \"days\").toDate().getTime();\n            return time.getTime() < min;\n          }\n        };\n      } else {\n        vm.options = {\n          disabledDate: function (time) {\n            return false;\n          }\n        };\n      }\n    }\n  },\n  mounted: function () {\n    this.$jQuery('body').off();\n    var vm = this;\n    vm.options = {\n      disabledDate: function (time) {\n        var min = moment(vm.closeDate).add(1, \"days\").toDate().getTime();\n        return time.getTime() < min;\n      }\n    };\n  },\n  methods: {\n    handleSizeChange: function (val) {\n      this.currentSize = val;\n    },\n    handleCurrentChange: function (val) {\n      this.currentPage = val;\n    },\n    queryData: _.debounce(function (val, skip, limit) {\n      var _this = this;\n\n      Meteor.call('queryClosingEntry', {\n        q: val,\n        filter: this.filter,\n        options: {\n          skip: skip || 0,\n          limit: limit || 10\n        }\n      }, function (err, result) {\n        if (!err) {\n          _this.closingEntryData = result.content;\n          _this.count = result.countClosingEntry;\n        }\n\n        _this.isSearching = false;\n      });\n    }, 300),\n    reportCurrencyClosing: function (data) {\n      var params = {};\n      var queryParams = {};\n      queryParams._id = data._id;\n      queryParams.area = Session.get(\"area\");\n      var path = FlowRouter.path(\"acc.currencyClosingReport\", params, queryParams);\n      window.open(path, \"_blank\");\n    },\n    fetchExchange: function () {\n      var _this2 = this;\n\n      Meteor.call('queryExchangeOptionReport', function (err, result) {\n        if (result) {\n          _this2.exchangeOptions = result;\n        }\n      });\n    },\n    popUpAdd: function () {\n      var vm = this;\n      Meteor.call(\"queryLastClosingEntry\", Session.get(\"area\"), function (err, re) {\n        if (re != undefined) {\n          vm.closeDate = re.closeDate;\n        } else {\n          vm.closeDate = \"\";\n        }\n      });\n    },\n    saveClosingEntry: function (event) {\n      event.preventDefault();\n      var vm = this;\n      this.$refs[\"closingEntryForm\"].validate(function (valid) {\n        if (valid) {\n          var closingEntryDoc = {\n            closeDate: vm.closingEntryForm.closeDate,\n            rolesArea: Session.get('area'),\n            month: moment(vm.closingEntryForm.closeDate).format(\"MM\"),\n            year: moment(vm.closingEntryForm.closeDate).format(\"YYYY\"),\n            closeDateName: moment(vm.closingEntryForm.closeDate).format(\"DD/MM/YYYY\"),\n            exchangeId: vm.closingEntryForm.exchangeId\n          };\n          Meteor.call(\"queryClosingEntryByMonthYear\", closingEntryDoc.month, closingEntryDoc.year, Session.get('area'), function (err, re) {\n            if (re == undefined) {\n              Meteor.call(\"insertClosingEntry\", closingEntryDoc, function (err, result) {\n                if (!err) {\n                  vm.$message({\n                    duration: 1000,\n                    message: \"Save Successfully!\",\n                    type: 'success'\n                  });\n                  vm.dialogAddClosingEntry = false;\n                  vm.$refs[\"closingEntryForm\"].resetFields();\n                  vm.resetForm();\n                } else {\n                  vm.$message({\n                    duration: 1000,\n                    message: \"Duplicate Date!!\",\n                    type: 'error'\n                  });\n                }\n              });\n            } else {\n              vm.$message({\n                duration: 1000,\n                message: \"Duplicate Date!!\",\n                type: 'error'\n              });\n            }\n          });\n        }\n      });\n    },\n    updateClosingEntry: function () {\n      var vm = this;\n      var closingEntryDoc = {\n        _id: vm.closingEntryForm._id,\n        closeDate: vm.closingEntryForm.closeDate,\n        rolesArea: Session.get('area'),\n        month: moment(vm.closingEntryForm.closeDate).format(\"MM\"),\n        year: moment(vm.closingEntryForm.closeDate).format(\"YYYY\"),\n        closeDateName: moment(this.closingEntryForm.closeDate).format(\"DD/MM/YYYY\")\n      };\n      Meteor.call(\"queryClosingEntryByMonthYear\", closingEntryDoc.month, closingEntryDoc.year, Session.get('area'), function (err, re) {\n        if (re == undefined) {\n          Meteor.call(\"updateClosingEntry\", closingEntryDoc, function (err, result) {\n            if (!err) {\n              vm.$message({\n                duration: 1000,\n                message: \"Update Successfully!\",\n                type: 'success'\n              });\n              vm.dialogUpdateClosingEntry = false;\n              vm.$refs[\"closingEntryForm\"].resetFields();\n              vm.resetForm();\n            } else {\n              vm.$message({\n                duration: 1000,\n                message: \"Update Failed!\",\n                type: 'error'\n              });\n            }\n          });\n        } else {\n          vm.$message({\n            duration: 1000,\n            message: \"Duplicate Date!!\",\n            type: 'error'\n          });\n        }\n      });\n    },\n    removeClosingEntry: function (index, row, rows) {\n      var vm = this;\n      Meteor.call(\"queryLastClosingEntry\", Session.get(\"area\"), function (err, re) {\n        if (re.month == row.month && re.year == row.year) {\n          vm.$confirm('This will permanently delete the file. Continue?', 'Warning', {\n            confirmButtonText: 'OK',\n            cancelButtonText: 'Cancel',\n            type: 'warning'\n          }).then(function () {\n            Meteor.call(\"removeClosingEntry\", row._id, function (err, result) {\n              if (!err) {\n                rows.splice(index, 1);\n                vm.$message({\n                  message: \"\\u179B\\u17BB\\u1794 \" + row.closeDateName + \" \\u1794\\u17B6\\u1793\\u1787\\u17C4\\u1782\\u1787\\u17D0\\u1799\",\n                  type: 'success'\n                });\n              } else {\n                vm.$message({\n                  type: 'error',\n                  message: 'Delete Failed'\n                });\n              }\n            });\n          }).catch(function () {\n            vm.$message({\n              type: 'info',\n              message: 'Delete canceled'\n            });\n          });\n        } else {\n          vm.$message({\n            type: 'error',\n            message: 'Delete Failed ! Not Last Date!'\n          });\n        }\n      });\n    },\n    findClosingEntryById: function (doc) {\n      var _this3 = this;\n\n      Meteor.call(\"queryClosingEntryById\", doc.row._id, function (err, result) {\n        if (result) {\n          _this3.closingEntryForm = result;\n        }\n      });\n    },\n    cancel: function () {\n      this.$message({\n        type: 'info',\n        message: 'Canceled'\n      });\n    },\n    resetForm: function () {\n      if (this.$refs[\"closingEntryForm\"]) {\n        this.$refs[\"closingEntryForm\"].resetFields();\n      }\n    }\n  },\n  created: function () {\n    this.isSearching = true;\n    this.queryData();\n    this.fetchExchange();\n    Meteor.subscribe('Acc_ClosingEntryReact');\n  },\n  meteor: {\n    newRe: function () {\n      var vm = this;\n      Acc_ClosingEntryReact.find({}).fetch();\n      vm.queryData(vm.searchData, vm.skip, vm.currentSize + vm.skip);\n    }\n  }\n});","map":{"version":3,"sources":["/home/snr/Desktop/Project/spa/imports/vue/ui/accClosingEntry.vue"],"names":["Acc_ClosingEntryReact","module","link","v","exportDefault","data","closingEntryData","journalClosingEntry","exchangeOptions","loading","searchData","isSearching","currentPage","currentSize","count","dialogAddClosingEntry","dialogUpdateClosingEntry","closingEntryForm","closeDate","moment","toDate","exchangeId","_id","rules","type","required","message","trigger","options","disabledDate","time","skip","watch","val","queryData","vm","undefined","min","add","getTime","mounted","$jQuery","off","methods","handleSizeChange","handleCurrentChange","_","debounce","limit","Meteor","call","q","filter","err","result","content","countClosingEntry","reportCurrencyClosing","params","queryParams","area","Session","get","path","FlowRouter","window","open","fetchExchange","popUpAdd","re","saveClosingEntry","event","preventDefault","$refs","validate","valid","closingEntryDoc","rolesArea","month","format","year","closeDateName","$message","duration","resetFields","resetForm","updateClosingEntry","removeClosingEntry","index","row","rows","$confirm","confirmButtonText","cancelButtonText","then","splice","catch","findClosingEntryById","doc","cancel","created","subscribe","meteor","newRe","find","fetch"],"mappings":"AAAA,IAAIA,qBAAJ;AAA0BC,MAAM,CAACC,IAAP,CAAY,kCAAZ,EAA+C;AAACF,EAAAA,qBAAD,YAAuBG,CAAvB,EAAyB;AAACH,IAAAA,qBAAqB,GAACG,CAAtB;AAAwB;AAAlD,CAA/C,EAAmG,CAAnG;AAA1BF,MAAM,CAACG,aAAP,CA4Ke;AACXC,EAAAA,IADW,cACJ;AACH,WAAO;AACHC,MAAAA,gBAAgB,EAAE,EADf;AAEHC,MAAAA,mBAAmB,EAAE,EAFlB;AAGHC,MAAAA,eAAe,EAAE,EAHd;AAIHC,MAAAA,OAAO,EAAE,KAJN;AAKHC,MAAAA,UAAU,EAAE,EALT;AAMHC,MAAAA,WAAW,EAAE,KANV;AAOHC,MAAAA,WAAW,EAAE,CAPV;AAQHC,MAAAA,WAAW,EAAE,EARV;AASHC,MAAAA,KAAK,EAAE,CATJ;AAUHC,MAAAA,qBAAqB,EAAE,KAVpB;AAWHC,MAAAA,wBAAwB,EAAE,KAXvB;AAYHC,MAAAA,gBAAgB,EAAE;AACdC,QAAAA,SAAS,EAAEC,MAAM,GAAGC,MAAT,EADG;AAEdC,QAAAA,UAAU,EAAE,EAFE;AAGdC,QAAAA,GAAG,EAAE;AAHS,OAZf;AAiBHC,MAAAA,KAAK,EAAE;AACHL,QAAAA,SAAS,EAAE,CAAC;AACRM,UAAAA,IAAI,EAAE,MADE;AAERC,UAAAA,QAAQ,EAAE,IAFF;AAGRC,UAAAA,OAAO,EAAE,2BAHD;AAIRC,UAAAA,OAAO,EAAE;AAJD,SAAD,CADR;AAOHN,QAAAA,UAAU,EAAE,CAAC;AAACI,UAAAA,QAAQ,EAAE,IAAX;AAAiBC,UAAAA,OAAO,EAAE,uBAA1B;AAAmDC,UAAAA,OAAO,EAAE;AAA5D,SAAD;AAPT,OAjBJ;AA4BHC,MAAAA,OAAO,EAAE;AACLC,QAAAA,YADK,YACQC,IADR,EACc;AACf,iBAAO,KAAP;AACH;AAHI,OA5BN;AAiCHD,MAAAA,YAAY,EAAE,KAjCX;AAkCHX,MAAAA,SAAS,EAAE,EAlCR;AAmCHa,MAAAA,IAAI,EAAE;AAnCH,KAAP;AAqCH,GAvCU;AAwCXC,EAAAA,KAAK,EAAE;AACHnB,IAAAA,WADG,YACSoB,GADT,EACc;AACb,WAAKtB,WAAL,GAAmB,IAAnB;AACA,WAAKoB,IAAL,GAAY,CAAC,KAAKnB,WAAL,GAAmB,CAApB,IAAyBqB,GAArC;AACA,WAAKC,SAAL,CAAe,KAAKxB,UAApB,EAAgC,KAAKqB,IAArC,EAA2CE,GAAG,GAAG,KAAKF,IAAtD;AACH,KALE;AAMHnB,IAAAA,WANG,YAMSqB,GANT,EAMc;AACb,WAAKtB,WAAL,GAAmB,IAAnB;AACA,WAAKoB,IAAL,GAAY,CAACE,GAAG,GAAG,CAAP,IAAY,KAAKpB,WAA7B;AACA,WAAKqB,SAAL,CAAe,KAAKxB,UAApB,EAAgC,KAAKqB,IAArC,EAA2C,KAAKlB,WAAL,GAAmB,KAAKkB,IAAnE;AACH,KAVE;AAWHrB,IAAAA,UAXG,YAWQuB,GAXR,EAWa;AACZ,WAAKtB,WAAL,GAAmB,IAAnB;AACA,WAAKoB,IAAL,GAAY,CAAC,KAAKnB,WAAL,GAAmB,CAApB,IAAyB,KAAKC,WAA1C;AACA,WAAKqB,SAAL,CAAeD,GAAf,EAAoB,KAAKF,IAAzB,EAA+B,KAAKlB,WAAL,GAAmB,KAAKkB,IAAvD;AACH,KAfE;AAgBH,gCAhBG,YAgB0BE,GAhB1B,EAgB+B;AAC9B,UAAIE,EAAE,GAAG,IAAT;;AACA,UAAIA,EAAE,CAACjB,SAAH,IAAgBiB,EAAE,CAACjB,SAAH,IAAgB,EAAhC,IAAsCiB,EAAE,CAACjB,SAAH,IAAgBkB,SAA1D,EAAqE;AACjED,QAAAA,EAAE,CAACP,OAAH,GAAa;AACTC,UAAAA,YADS,YACIC,IADJ,EACU;AACf,gBAAIO,GAAG,GAAGlB,MAAM,CAACgB,EAAE,CAACjB,SAAJ,CAAN,CAAqBoB,GAArB,CAAyB,CAAzB,EAA4B,MAA5B,EAAoClB,MAApC,GAA6CmB,OAA7C,EAAV;AACA,mBAAOT,IAAI,CAACS,OAAL,KAAiBF,GAAxB;AACH;AAJQ,SAAb;AAMH,OAPD,MAOO;AACHF,QAAAA,EAAE,CAACP,OAAH,GAAa;AACTC,UAAAA,YADS,YACIC,IADJ,EACU;AACf,mBAAO,KAAP;AACH;AAHQ,SAAb;AAKH;AACJ;AAhCE,GAxCI;AA0EXU,EAAAA,OA1EW,cA0ED;AACN,SAAKC,OAAL,CAAa,MAAb,EAAqBC,GAArB;AACA,QAAIP,EAAE,GAAG,IAAT;AACAA,IAAAA,EAAE,CAACP,OAAH,GAAa;AACTC,MAAAA,YADS,YACIC,IADJ,EACU;AACf,YAAIO,GAAG,GAAGlB,MAAM,CAACgB,EAAE,CAACjB,SAAJ,CAAN,CAAqBoB,GAArB,CAAyB,CAAzB,EAA4B,MAA5B,EAAoClB,MAApC,GAA6CmB,OAA7C,EAAV;AACA,eAAOT,IAAI,CAACS,OAAL,KAAiBF,GAAxB;AACH;AAJQ,KAAb;AAMH,GAnFU;AAoFXM,EAAAA,OAAO,EAAE;AACLC,IAAAA,gBADK,YACYX,GADZ,EACiB;AAClB,WAAKpB,WAAL,GAAmBoB,GAAnB;AACH,KAHI;AAILY,IAAAA,mBAJK,YAIeZ,GAJf,EAIoB;AACrB,WAAKrB,WAAL,GAAmBqB,GAAnB;AACH,KANI;AAOLC,IAAAA,SAAS,EAAEY,CAAC,CAACC,QAAF,CAAW,UAAUd,GAAV,EAAeF,IAAf,EAAqBiB,KAArB,EAA4B;AAAA;;AAC9CC,MAAAA,MAAM,CAACC,IAAP,CAAY,mBAAZ,EAAiC;AAC7BC,QAAAA,CAAC,EAAElB,GAD0B;AAE7BmB,QAAAA,MAAM,EAAE,KAAKA,MAFgB;AAG7BxB,QAAAA,OAAO,EAAE;AAACG,UAAAA,IAAI,EAAEA,IAAI,IAAI,CAAf;AAAkBiB,UAAAA,KAAK,EAAEA,KAAK,IAAI;AAAlC;AAHoB,OAAjC,EAIG,UAACK,GAAD,EAAMC,MAAN,EAAiB;AAChB,YAAI,CAACD,GAAL,EAAU;AACN,UAAA,KAAI,CAAC/C,gBAAL,GAAwBgD,MAAM,CAACC,OAA/B;AACA,UAAA,KAAI,CAACzC,KAAL,GAAawC,MAAM,CAACE,iBAApB;AACH;;AACD,QAAA,KAAI,CAAC7C,WAAL,GAAmB,KAAnB;AACH,OAVD;AAWH,KAZU,EAYR,GAZQ,CAPN;AAqBL8C,IAAAA,qBArBK,YAqBiBpD,IArBjB,EAqBuB;AACxB,UAAIqD,MAAM,GAAG,EAAb;AACA,UAAIC,WAAW,GAAG,EAAlB;AACAA,MAAAA,WAAW,CAACrC,GAAZ,GAAkBjB,IAAI,CAACiB,GAAvB;AACAqC,MAAAA,WAAW,CAACC,IAAZ,GAAmBC,OAAO,CAACC,GAAR,CAAY,MAAZ,CAAnB;AACA,UAAIC,IAAI,GAAGC,UAAU,CAACD,IAAX,CAAgB,2BAAhB,EAA6CL,MAA7C,EAAqDC,WAArD,CAAX;AACAM,MAAAA,MAAM,CAACC,IAAP,CAAYH,IAAZ,EAAkB,QAAlB;AACH,KA5BI;AA8BLI,IAAAA,aA9BK,cA8BW;AAAA;;AACZlB,MAAAA,MAAM,CAACC,IAAP,CAAY,2BAAZ,EAAyC,UAACG,GAAD,EAAMC,MAAN,EAAiB;AACtD,YAAIA,MAAJ,EAAY;AACR,UAAA,MAAI,CAAC9C,eAAL,GAAuB8C,MAAvB;AACH;AACJ,OAJD;AAKH,KApCI;AAqCLc,IAAAA,QArCK,cAqCM;AACP,UAAIjC,EAAE,GAAG,IAAT;AACAc,MAAAA,MAAM,CAACC,IAAP,CAAY,uBAAZ,EAAqCW,OAAO,CAACC,GAAR,CAAY,MAAZ,CAArC,EAA0D,UAAUT,GAAV,EAAegB,EAAf,EAAmB;AACzE,YAAIA,EAAE,IAAIjC,SAAV,EAAqB;AACjBD,UAAAA,EAAE,CAACjB,SAAH,GAAemD,EAAE,CAACnD,SAAlB;AACH,SAFD,MAEO;AACHiB,UAAAA,EAAE,CAACjB,SAAH,GAAe,EAAf;AACH;AACJ,OAND;AAOH,KA9CI;AA+CLoD,IAAAA,gBA/CK,YA+CYC,KA/CZ,EA+CmB;AACpBA,MAAAA,KAAK,CAACC,cAAN;AAEA,UAAIrC,EAAE,GAAG,IAAT;AACA,WAAKsC,KAAL,CAAW,kBAAX,EAA+BC,QAA/B,CAAwC,UAACC,KAAD,EAAW;AAC/C,YAAIA,KAAJ,EAAW;AACP,cAAIC,eAAe,GAAG;AAClB1D,YAAAA,SAAS,EAAEiB,EAAE,CAAClB,gBAAH,CAAoBC,SADb;AAElB2D,YAAAA,SAAS,EAAEhB,OAAO,CAACC,GAAR,CAAY,MAAZ,CAFO;AAGlBgB,YAAAA,KAAK,EAAE3D,MAAM,CAACgB,EAAE,CAAClB,gBAAH,CAAoBC,SAArB,CAAN,CAAsC6D,MAAtC,CAA6C,IAA7C,CAHW;AAIlBC,YAAAA,IAAI,EAAE7D,MAAM,CAACgB,EAAE,CAAClB,gBAAH,CAAoBC,SAArB,CAAN,CAAsC6D,MAAtC,CAA6C,MAA7C,CAJY;AAKlBE,YAAAA,aAAa,EAAE9D,MAAM,CAACgB,EAAE,CAAClB,gBAAH,CAAoBC,SAArB,CAAN,CAAsC6D,MAAtC,CAA6C,YAA7C,CALG;AAMlB1D,YAAAA,UAAU,EAAEc,EAAE,CAAClB,gBAAH,CAAoBI;AANd,WAAtB;AASA4B,UAAAA,MAAM,CAACC,IAAP,CAAY,8BAAZ,EAA4C0B,eAAe,CAACE,KAA5D,EAAmEF,eAAe,CAACI,IAAnF,EAAyFnB,OAAO,CAACC,GAAR,CAAY,MAAZ,CAAzF,EAA8G,UAAUT,GAAV,EAAegB,EAAf,EAAmB;AAC7H,gBAAIA,EAAE,IAAIjC,SAAV,EAAqB;AACjBa,cAAAA,MAAM,CAACC,IAAP,CAAY,oBAAZ,EAAkC0B,eAAlC,EAAmD,UAACvB,GAAD,EAAMC,MAAN,EAAiB;AAChE,oBAAI,CAACD,GAAL,EAAU;AACNlB,kBAAAA,EAAE,CAAC+C,QAAH,CAAY;AACRC,oBAAAA,QAAQ,EAAE,IADF;AAERzD,oBAAAA,OAAO,sBAFC;AAGRF,oBAAAA,IAAI,EAAE;AAHE,mBAAZ;AAKAW,kBAAAA,EAAE,CAACpB,qBAAH,GAA2B,KAA3B;AACAoB,kBAAAA,EAAE,CAACsC,KAAH,CAAS,kBAAT,EAA6BW,WAA7B;AACAjD,kBAAAA,EAAE,CAACkD,SAAH;AAEH,iBAVD,MAUO;AACHlD,kBAAAA,EAAE,CAAC+C,QAAH,CAAY;AACRC,oBAAAA,QAAQ,EAAE,IADF;AAERzD,oBAAAA,OAAO,oBAFC;AAGRF,oBAAAA,IAAI,EAAE;AAHE,mBAAZ;AAKH;AACJ,eAlBD;AAmBH,aApBD,MAoBO;AACHW,cAAAA,EAAE,CAAC+C,QAAH,CAAY;AACRC,gBAAAA,QAAQ,EAAE,IADF;AAERzD,gBAAAA,OAAO,oBAFC;AAGRF,gBAAAA,IAAI,EAAE;AAHE,eAAZ;AAKH;AACJ,WA5BD;AA8BH;AACJ,OA1CD;AA4CH,KA/FI;AAgGL8D,IAAAA,kBAhGK,cAgGgB;AACjB,UAAInD,EAAE,GAAG,IAAT;AACA,UAAIyC,eAAe,GAAG;AAClBtD,QAAAA,GAAG,EAAEa,EAAE,CAAClB,gBAAH,CAAoBK,GADP;AAElBJ,QAAAA,SAAS,EAAEiB,EAAE,CAAClB,gBAAH,CAAoBC,SAFb;AAGlB2D,QAAAA,SAAS,EAAEhB,OAAO,CAACC,GAAR,CAAY,MAAZ,CAHO;AAIlBgB,QAAAA,KAAK,EAAE3D,MAAM,CAACgB,EAAE,CAAClB,gBAAH,CAAoBC,SAArB,CAAN,CAAsC6D,MAAtC,CAA6C,IAA7C,CAJW;AAKlBC,QAAAA,IAAI,EAAE7D,MAAM,CAACgB,EAAE,CAAClB,gBAAH,CAAoBC,SAArB,CAAN,CAAsC6D,MAAtC,CAA6C,MAA7C,CALY;AAMlBE,QAAAA,aAAa,EAAE9D,MAAM,CAAC,KAAKF,gBAAL,CAAsBC,SAAvB,CAAN,CAAwC6D,MAAxC,CAA+C,YAA/C;AANG,OAAtB;AASA9B,MAAAA,MAAM,CAACC,IAAP,CAAY,8BAAZ,EAA4C0B,eAAe,CAACE,KAA5D,EAAmEF,eAAe,CAACI,IAAnF,EAAyFnB,OAAO,CAACC,GAAR,CAAY,MAAZ,CAAzF,EAA8G,UAAUT,GAAV,EAAegB,EAAf,EAAmB;AAC7H,YAAIA,EAAE,IAAIjC,SAAV,EAAqB;AACjBa,UAAAA,MAAM,CAACC,IAAP,CAAY,oBAAZ,EAAkC0B,eAAlC,EAAmD,UAACvB,GAAD,EAAMC,MAAN,EAAiB;AAChE,gBAAI,CAACD,GAAL,EAAU;AACNlB,cAAAA,EAAE,CAAC+C,QAAH,CAAY;AACRC,gBAAAA,QAAQ,EAAE,IADF;AAERzD,gBAAAA,OAAO,wBAFC;AAGRF,gBAAAA,IAAI,EAAE;AAHE,eAAZ;AAKAW,cAAAA,EAAE,CAACnB,wBAAH,GAA8B,KAA9B;AACAmB,cAAAA,EAAE,CAACsC,KAAH,CAAS,kBAAT,EAA6BW,WAA7B;AACAjD,cAAAA,EAAE,CAACkD,SAAH;AAEH,aAVD,MAUO;AACHlD,cAAAA,EAAE,CAAC+C,QAAH,CAAY;AACRC,gBAAAA,QAAQ,EAAE,IADF;AAERzD,gBAAAA,OAAO,kBAFC;AAGRF,gBAAAA,IAAI,EAAE;AAHE,eAAZ;AAKH;AACJ,WAlBD;AAmBH,SApBD,MAoBO;AACHW,UAAAA,EAAE,CAAC+C,QAAH,CAAY;AACRC,YAAAA,QAAQ,EAAE,IADF;AAERzD,YAAAA,OAAO,oBAFC;AAGRF,YAAAA,IAAI,EAAE;AAHE,WAAZ;AAKH;AACJ,OA5BD;AA8BH,KAzII;AA0IL+D,IAAAA,kBA1IK,YA0IcC,KA1Id,EA0IqBC,GA1IrB,EA0I0BC,IA1I1B,EA0IgC;AACjC,UAAIvD,EAAE,GAAG,IAAT;AACAc,MAAAA,MAAM,CAACC,IAAP,CAAY,uBAAZ,EAAqCW,OAAO,CAACC,GAAR,CAAY,MAAZ,CAArC,EAA0D,UAAUT,GAAV,EAAegB,EAAf,EAAmB;AACzE,YAAIA,EAAE,CAACS,KAAH,IAAYW,GAAG,CAACX,KAAhB,IAAyBT,EAAE,CAACW,IAAH,IAAWS,GAAG,CAACT,IAA5C,EAAkD;AAC9C7C,UAAAA,EAAE,CAACwD,QAAH,CAAY,kDAAZ,EAAgE,SAAhE,EAA2E;AACvEC,YAAAA,iBAAiB,EAAE,IADoD;AAEvEC,YAAAA,gBAAgB,EAAE,QAFqD;AAGvErE,YAAAA,IAAI,EAAE;AAHiE,WAA3E,EAIGsE,IAJH,CAIQ,YAAM;AACV7C,YAAAA,MAAM,CAACC,IAAP,CAAY,oBAAZ,EAAkCuC,GAAG,CAACnE,GAAtC,EAA2C,UAAC+B,GAAD,EAAMC,MAAN,EAAiB;AACxD,kBAAI,CAACD,GAAL,EAAU;AACNqC,gBAAAA,IAAI,CAACK,MAAL,CAAYP,KAAZ,EAAmB,CAAnB;AAEArD,gBAAAA,EAAE,CAAC+C,QAAH,CAAY;AACRxD,kBAAAA,OAAO,0BAAS+D,GAAG,CAACR,aAAb,4DADC;AAERzD,kBAAAA,IAAI,EAAE;AAFE,iBAAZ;AAIH,eAPD,MAOO;AACHW,gBAAAA,EAAE,CAAC+C,QAAH,CAAY;AACR1D,kBAAAA,IAAI,EAAE,OADE;AAERE,kBAAAA,OAAO,EAAE;AAFD,iBAAZ;AAIH;AAEJ,aAfD;AAiBH,WAtBD,EAsBGsE,KAtBH,CAsBS,YAAM;AACX7D,YAAAA,EAAE,CAAC+C,QAAH,CAAY;AACR1D,cAAAA,IAAI,EAAE,MADE;AAERE,cAAAA,OAAO,EAAE;AAFD,aAAZ;AAIH,WA3BD;AA4BH,SA7BD,MA6BO;AACHS,UAAAA,EAAE,CAAC+C,QAAH,CAAY;AACR1D,YAAAA,IAAI,EAAE,OADE;AAERE,YAAAA,OAAO,EAAE;AAFD,WAAZ;AAIH;AACJ,OApCD;AAuCH,KAnLI;AAoLLuE,IAAAA,oBApLK,YAoLgBC,GApLhB,EAoLqB;AAAA;;AACtBjD,MAAAA,MAAM,CAACC,IAAP,CAAY,uBAAZ,EAAqCgD,GAAG,CAACT,GAAJ,CAAQnE,GAA7C,EAAkD,UAAC+B,GAAD,EAAMC,MAAN,EAAiB;AAC/D,YAAIA,MAAJ,EAAY;AACR,UAAA,MAAI,CAACrC,gBAAL,GAAwBqC,MAAxB;AACH;AACJ,OAJD;AAKH,KA1LI;AA4LL6C,IAAAA,MA5LK,cA4LI;AACL,WAAKjB,QAAL,CAAc;AACV1D,QAAAA,IAAI,EAAE,MADI;AAEVE,QAAAA,OAAO,EAAE;AAFC,OAAd;AAIH,KAjMI;AAkML2D,IAAAA,SAlMK,cAkMO;AACR,UAAI,KAAKZ,KAAL,CAAW,kBAAX,CAAJ,EAAoC;AAChC,aAAKA,KAAL,CAAW,kBAAX,EAA+BW,WAA/B;AACH;AACJ;AAtMI,GApFE;AA4RXgB,EAAAA,OA5RW,cA4RD;AACN,SAAKzF,WAAL,GAAmB,IAAnB;AACA,SAAKuB,SAAL;AACA,SAAKiC,aAAL;AACAlB,IAAAA,MAAM,CAACoD,SAAP,CAAiB,uBAAjB;AAEH,GAlSU;AAmSXC,EAAAA,MAAM,EAAE;AACJC,IAAAA,KADI,cACI;AACJ,UAAIpE,EAAE,GAAG,IAAT;AACAnC,MAAAA,qBAAqB,CAACwG,IAAtB,CAA2B,EAA3B,EAA+BC,KAA/B;AACAtE,MAAAA,EAAE,CAACD,SAAH,CAAaC,EAAE,CAACzB,UAAhB,EAA4ByB,EAAE,CAACJ,IAA/B,EAAqCI,EAAE,CAACtB,WAAH,GAAiBsB,EAAE,CAACJ,IAAzD;AACH;AALG;AAnSG,CA5Kf","sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {Acc_ClosingEntryReact} from \"../../collection/accClosingEntry\";\n\nexport default {\n    data() {\n        return {\n            closingEntryData: [],\n            journalClosingEntry: [],\n            exchangeOptions: [],\n            loading: false,\n            searchData: '',\n            isSearching: false,\n            currentPage: 1,\n            currentSize: 10,\n            count: 0,\n            dialogAddClosingEntry: false,\n            dialogUpdateClosingEntry: false,\n            closingEntryForm: {\n                closeDate: moment().toDate(),\n                exchangeId: \"\",\n                _id: \"\"\n            },\n            rules: {\n                closeDate: [{\n                    type: 'date',\n                    required: true,\n                    message: 'Please input Journal Date',\n                    trigger: 'blur'\n                }],\n                exchangeId: [{required: true, message: 'Please input Exchange', trigger: 'blur'}]\n\n\n            },\n            options: {\n                disabledDate(time) {\n                    return false;\n                }\n            },\n            disabledDate: false,\n            closeDate: \"\",\n            skip: 0\n        }\n    },\n    watch: {\n        currentSize(val) {\n            this.isSearching = true;\n            this.skip = (this.currentPage - 1) * val;\n            this.queryData(this.searchData, this.skip, val + this.skip);\n        },\n        currentPage(val) {\n            this.isSearching = true;\n            this.skip = (val - 1) * this.currentSize;\n            this.queryData(this.searchData, this.skip, this.currentSize + this.skip);\n        },\n        searchData(val) {\n            this.isSearching = true;\n            this.skip = (this.currentPage - 1) * this.currentSize;\n            this.queryData(val, this.skip, this.currentSize + this.skip);\n        },\n        \"closingEntryForm.closeDate\"(val) {\n            let vm = this;\n            if (vm.closeDate && vm.closeDate != \"\" && vm.closeDate != undefined) {\n                vm.options = {\n                    disabledDate(time) {\n                        let min = moment(vm.closeDate).add(1, \"days\").toDate().getTime();\n                        return time.getTime() < min;\n                    }\n                }\n            } else {\n                vm.options = {\n                    disabledDate(time) {\n                        return false;\n                    }\n                }\n            }\n        }\n    },\n    mounted() {\n        this.$jQuery('body').off();\n        let vm = this;\n        vm.options = {\n            disabledDate(time) {\n                let min = moment(vm.closeDate).add(1, \"days\").toDate().getTime();\n                return time.getTime() < min;\n            }\n        }\n    },\n    methods: {\n        handleSizeChange(val) {\n            this.currentSize = val;\n        },\n        handleCurrentChange(val) {\n            this.currentPage = val;\n        },\n        queryData: _.debounce(function (val, skip, limit) {\n            Meteor.call('queryClosingEntry', {\n                q: val,\n                filter: this.filter,\n                options: {skip: skip || 0, limit: limit || 10}\n            }, (err, result) => {\n                if (!err) {\n                    this.closingEntryData = result.content;\n                    this.count = result.countClosingEntry;\n                }\n                this.isSearching = false;\n            });\n        }, 300),\n\n        reportCurrencyClosing(data) {\n            let params = {};\n            let queryParams = {};\n            queryParams._id = data._id;\n            queryParams.area = Session.get(\"area\");\n            let path = FlowRouter.path(\"acc.currencyClosingReport\", params, queryParams);\n            window.open(path, \"_blank\");\n        },\n\n        fetchExchange() {\n            Meteor.call('queryExchangeOptionReport', (err, result) => {\n                if (result) {\n                    this.exchangeOptions = result;\n                }\n            });\n        },\n        popUpAdd() {\n            let vm = this;\n            Meteor.call(\"queryLastClosingEntry\", Session.get(\"area\"), function (err, re) {\n                if (re != undefined) {\n                    vm.closeDate = re.closeDate;\n                } else {\n                    vm.closeDate = \"\";\n                }\n            })\n        },\n        saveClosingEntry(event) {\n            event.preventDefault();\n\n            let vm = this;\n            this.$refs[\"closingEntryForm\"].validate((valid) => {\n                if (valid) {\n                    let closingEntryDoc = {\n                        closeDate: vm.closingEntryForm.closeDate,\n                        rolesArea: Session.get('area'),\n                        month: moment(vm.closingEntryForm.closeDate).format(\"MM\"),\n                        year: moment(vm.closingEntryForm.closeDate).format(\"YYYY\"),\n                        closeDateName: moment(vm.closingEntryForm.closeDate).format(\"DD/MM/YYYY\"),\n                        exchangeId: vm.closingEntryForm.exchangeId\n                    };\n\n                    Meteor.call(\"queryClosingEntryByMonthYear\", closingEntryDoc.month, closingEntryDoc.year, Session.get('area'), function (err, re) {\n                        if (re == undefined) {\n                            Meteor.call(\"insertClosingEntry\", closingEntryDoc, (err, result) => {\n                                if (!err) {\n                                    vm.$message({\n                                        duration: 1000,\n                                        message: `Save Successfully!`,\n                                        type: 'success'\n                                    });\n                                    vm.dialogAddClosingEntry = false;\n                                    vm.$refs[\"closingEntryForm\"].resetFields();\n                                    vm.resetForm();\n\n                                } else {\n                                    vm.$message({\n                                        duration: 1000,\n                                        message: `Duplicate Date!!`,\n                                        type: 'error'\n                                    });\n                                }\n                            })\n                        } else {\n                            vm.$message({\n                                duration: 1000,\n                                message: `Duplicate Date!!`,\n                                type: 'error'\n                            });\n                        }\n                    })\n\n                }\n            })\n\n        },\n        updateClosingEntry() {\n            let vm = this;\n            let closingEntryDoc = {\n                _id: vm.closingEntryForm._id,\n                closeDate: vm.closingEntryForm.closeDate,\n                rolesArea: Session.get('area'),\n                month: moment(vm.closingEntryForm.closeDate).format(\"MM\"),\n                year: moment(vm.closingEntryForm.closeDate).format(\"YYYY\"),\n                closeDateName: moment(this.closingEntryForm.closeDate).format(\"DD/MM/YYYY\")\n\n            };\n            Meteor.call(\"queryClosingEntryByMonthYear\", closingEntryDoc.month, closingEntryDoc.year, Session.get('area'), function (err, re) {\n                if (re == undefined) {\n                    Meteor.call(\"updateClosingEntry\", closingEntryDoc, (err, result) => {\n                        if (!err) {\n                            vm.$message({\n                                duration: 1000,\n                                message: `Update Successfully!`,\n                                type: 'success'\n                            });\n                            vm.dialogUpdateClosingEntry = false;\n                            vm.$refs[\"closingEntryForm\"].resetFields();\n                            vm.resetForm();\n\n                        } else {\n                            vm.$message({\n                                duration: 1000,\n                                message: `Update Failed!`,\n                                type: 'error'\n                            });\n                        }\n                    })\n                } else {\n                    vm.$message({\n                        duration: 1000,\n                        message: `Duplicate Date!!`,\n                        type: 'error'\n                    });\n                }\n            })\n\n        },\n        removeClosingEntry(index, row, rows) {\n            let vm = this;\n            Meteor.call(\"queryLastClosingEntry\", Session.get(\"area\"), function (err, re) {\n                if (re.month == row.month && re.year == row.year) {\n                    vm.$confirm('This will permanently delete the file. Continue?', 'Warning', {\n                        confirmButtonText: 'OK',\n                        cancelButtonText: 'Cancel',\n                        type: 'warning'\n                    }).then(() => {\n                        Meteor.call(\"removeClosingEntry\", row._id, (err, result) => {\n                            if (!err) {\n                                rows.splice(index, 1);\n\n                                vm.$message({\n                                    message: `លុប ${row.closeDateName} បានជោគជ័យ`,\n                                    type: 'success'\n                                });\n                            } else {\n                                vm.$message({\n                                    type: 'error',\n                                    message: 'Delete Failed'\n                                });\n                            }\n\n                        })\n\n                    }).catch(() => {\n                        vm.$message({\n                            type: 'info',\n                            message: 'Delete canceled'\n                        });\n                    });\n                } else {\n                    vm.$message({\n                        type: 'error',\n                        message: 'Delete Failed ! Not Last Date!'\n                    });\n                }\n            })\n\n\n        },\n        findClosingEntryById(doc) {\n            Meteor.call(\"queryClosingEntryById\", doc.row._id, (err, result) => {\n                if (result) {\n                    this.closingEntryForm = result;\n                }\n            })\n        },\n\n        cancel() {\n            this.$message({\n                type: 'info',\n                message: 'Canceled'\n            });\n        },\n        resetForm() {\n            if (this.$refs[\"closingEntryForm\"]) {\n                this.$refs[\"closingEntryForm\"].resetFields();\n            }\n        }\n    },\n    created() {\n        this.isSearching = true;\n        this.queryData();\n        this.fetchExchange();\n        Meteor.subscribe('Acc_ClosingEntryReact');\n\n    },\n    meteor: {\n        newRe() {\n            let vm = this;\n            Acc_ClosingEntryReact.find({}).fetch();\n            vm.queryData(vm.searchData, vm.skip, vm.currentSize + vm.skip);\n        }\n    }\n}\n"]},"sourceType":"script","hash":"d6a859e4b882ffc5c7ee22e4925fb6a0366cfcf6"}
